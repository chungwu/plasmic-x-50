"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.detectCreateReactApp = exports.detectGatsby = exports.detectNextJsAppDir = exports.detectNextJs = exports.detectTypescript = void 0;
const findup_sync_1 = __importDefault(require("findup-sync"));
const npm_utils_1 = require("./npm-utils");
function detectTypescript() {
    return findup_sync_1.default("tsconfig.json");
}
exports.detectTypescript = detectTypescript;
function detectNextJs() {
    if (findup_sync_1.default("next.config.js") ||
        findup_sync_1.default(".next") ||
        findup_sync_1.default("next-env.d.ts")) {
        return true;
    }
    try {
        const packageJsonContent = npm_utils_1.getParsedPackageJson();
        return (packageJsonContent.scripts.build === "next build" ||
            "next" in packageJsonContent.dependencies);
    }
    catch (_a) {
        return false;
    }
}
exports.detectNextJs = detectNextJs;
function detectNextJsAppDir() {
    var _a, _b;
    const nextConfigPath = findup_sync_1.default("next.config.js");
    if (!nextConfigPath) {
        return false;
    }
    return ((_b = (_a = require(nextConfigPath)) === null || _a === void 0 ? void 0 : _a.experimental) === null || _b === void 0 ? void 0 : _b.appDir) || false;
}
exports.detectNextJsAppDir = detectNextJsAppDir;
function detectGatsby() {
    return findup_sync_1.default("gatsby-config.js") || findup_sync_1.default("gatsby-config.ts");
}
exports.detectGatsby = detectGatsby;
function detectCreateReactApp() {
    try {
        const packageJsonContent = npm_utils_1.getParsedPackageJson();
        return "react-scripts" in packageJsonContent.dependencies;
    }
    catch (_a) {
        return false;
    }
}
exports.detectCreateReactApp = detectCreateReactApp;
