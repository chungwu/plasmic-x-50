{"version":3,"file":"react-web.cjs.development.js","sources":["../../../node_modules/regenerator-runtime/runtime.js","../src/auth/PlasmicPageGuard.tsx","../src/common.ts","../src/react-utils.tsx","../src/render/Stack.tsx","../src/render/elements.ts","../src/render/global-variants.ts","../src/render/PlasmicHead/index.tsx","../src/render/PlasmicIcon.tsx","../src/render/PlasmicImg/index.tsx","../src/render/PlasmicLink.tsx","../src/render/translation.tsx","../src/render/PlasmicSlot.tsx","../src/render/screen-variants.ts","../src/render/ssr.tsx","../src/render/triggers.ts","../src/states/types.ts","../src/states/errors.ts","../src/states/graph.ts","../src/states/valtio.tsx","../src/states/helpers.ts","../src/index-common.tsx","../src/plume/plume-utils.ts","../src/plume/button/index.tsx","../src/plume/props-utils.ts","../src/plume/checkbox/index.tsx","../src/plume/collection-utils.tsx","../src/plume/triggered-overlay/context.tsx","../src/plume/menu/context.tsx","../src/plume/menu/menu.tsx","../src/plume/menu/menu-group.tsx","../src/plume/menu/menu-item.tsx","../src/plume/menu-button/menu-trigger.tsx","../src/plume/menu-button/DropdownMenu.tsx","../src/plume/menu-button/menu-button.tsx","../src/plume/select/context.tsx","../src/plume/select/select.tsx","../src/plume/select/select-option.tsx","../src/plume/select/select-option-group.tsx","../src/plume/switch/index.tsx","../src/plume/text-input/index.tsx","../src/plume/triggered-overlay/triggered-overlay.tsx"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import { usePlasmicDataSourceContext } from \"@plasmicapp/data-sources-context\";\nimport React from \"react\";\n\n// https://stackoverflow.com/a/2117523\nfunction uuidv4() {\n  // @ts-ignore\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n    (\n      c ^\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n    ).toString(16)\n  );\n}\n\nasync function triggerLogin(\n  appId: string,\n  authorizeEndpoint: string,\n  redirectUri?: string\n) {\n  async function sha256(text: string) {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(text);\n    const hashBuffer = await crypto.subtle.digest(\"SHA-256\", data);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    const hashHex = hashArray\n      .map((b) => b.toString(16).padStart(2, \"0\"))\n      .join(\"\");\n    return hashHex;\n  }\n\n  const continueTo = window.location.href;\n  const state = JSON.stringify({ continueTo });\n  const code_verifier = uuidv4();\n  localStorage.setItem(\"code_verifier\", code_verifier);\n  const code_challenge = await sha256(code_verifier);\n\n  const params = new URLSearchParams();\n  params.set(\"client_id\", appId);\n  params.set(\"state\", state);\n  params.set(\"response_type\", \"code\");\n  params.set(\"code_challenge\", code_challenge);\n  params.set(\"code_challenge_method\", \"S256\");\n\n  if (redirectUri) {\n    params.set(\"redirect_uri\", redirectUri);\n  }\n\n  const url = `${authorizeEndpoint}?${params.toString()}`;\n  window.location.href = url;\n}\n\ninterface PlasmicPageGuardProps {\n  appId: string;\n  authorizeEndpoint: string;\n  minRole?: string;\n  canTriggerLogin: boolean;\n  children: React.ReactNode;\n}\n\nexport function PlasmicPageGuard(props: PlasmicPageGuardProps) {\n  const {\n    appId,\n    authorizeEndpoint,\n    minRole,\n    canTriggerLogin,\n    children,\n  } = props;\n\n  const dataSourceCtxValue = usePlasmicDataSourceContext();\n\n  React.useEffect(() => {\n    if (canTriggerLogin) {\n      if (\n        minRole &&\n        dataSourceCtxValue &&\n        \"isUserLoading\" in dataSourceCtxValue &&\n        !dataSourceCtxValue.isUserLoading &&\n        !dataSourceCtxValue.user\n      ) {\n        triggerLogin(\n          appId,\n          authorizeEndpoint,\n          dataSourceCtxValue.authRedirectUri\n        );\n      }\n    }\n  }, [dataSourceCtxValue, appId, authorizeEndpoint, canTriggerLogin, minRole]);\n\n  function canUserViewPage() {\n    if (!minRole) {\n      return true;\n    }\n    if (!dataSourceCtxValue) {\n      return false;\n    }\n    if (!dataSourceCtxValue.user) {\n      return false;\n    }\n    if (!(\"roleIds\" in dataSourceCtxValue.user)) {\n      return false;\n    }\n    if (!Array.isArray(dataSourceCtxValue.user.roleIds)) {\n      return false;\n    }\n    return dataSourceCtxValue.user.roleIds.includes(minRole);\n  }\n\n  if (\n    !dataSourceCtxValue ||\n    dataSourceCtxValue.isUserLoading ||\n    (!dataSourceCtxValue.user && minRole && canTriggerLogin)\n  ) {\n    return null;\n  }\n\n  if (!canUserViewPage()) {\n    return <div>You don't have access to this page</div>;\n  }\n\n  return <>{children}</>;\n}\n\nexport function withPlasmicPageGuard<P extends object>(\n  WrappedComponent: React.ComponentType<P>,\n  options: Omit<PlasmicPageGuardProps, \"children\">\n) {\n  const PageGuard: React.FC<P> = (props) => (\n    <PlasmicPageGuard {...options}>\n      <WrappedComponent {...props} />\n    </PlasmicPageGuard>\n  );\n  return PageGuard;\n}\n","export function notNil<T>(x: T | undefined | null): x is T {\n  return x != null;\n}\n\nexport function pick<T extends {}>(\n  obj: T,\n  ...keys: (string | number | symbol)[]\n): Partial<T> {\n  if (Object.keys(obj).length === 0) {\n    return obj;\n  }\n  const res: any = {};\n  for (const key of keys) {\n    if (key in obj) {\n      res[key] = obj[key as keyof T];\n    }\n  }\n  return res as Partial<T>;\n}\n\nexport function pickBy<T extends {}>(\n  obj: T,\n  func: (key: string, val: any) => boolean\n): Partial<T> {\n  const res: any = {};\n  for (const [key, val] of Object.entries(obj)) {\n    if (func(key, val)) {\n      res[key] = obj[key as keyof T];\n    }\n  }\n  return res as Partial<T>;\n}\n\nexport function omit<T extends {}>(obj: T, ...keys: (keyof T)[]): Partial<T> {\n  if (Object.keys(obj).length === 0) {\n    return obj;\n  }\n  const res: Partial<T> = {};\n  for (const key of Object.keys(obj) as (keyof T)[]) {\n    if (!keys.includes(key)) {\n      res[key] = obj[key];\n    }\n  }\n  return res;\n}\n\nexport function isSubset<T>(a1: T[], a2: T[]) {\n  return a1.every((x) => a2.includes(x));\n}\n\nexport function chainSingleArgFuncs<A>(...funcs: ((arg: A) => A)[]) {\n  if (funcs.length === 0) {\n    return undefined;\n  }\n  return (arg: A) => {\n    let res: A = arg;\n    for (const func of funcs) {\n      res = func(res);\n    }\n    return res;\n  };\n}\n\nexport function ensure<T>(x: T | null | undefined): T {\n  if (x === null || x === undefined) {\n    debugger;\n    throw new Error(`Value must not be undefined or null`);\n  } else {\n    return x;\n  }\n}\n\nexport function isString(x: any): x is string {\n  return typeof x === \"string\";\n}\n\nexport function groupBy<T>(\n  collection: T[],\n  keyFunc: (x: T) => string\n): Record<string, T[]> {\n  const result: Record<string, T[]> = {};\n  for (const obj of collection) {\n    const key = keyFunc(obj);\n    if (key in result) {\n      result[key].push(obj);\n    } else {\n      result[key] = [obj];\n    }\n  }\n  return result;\n}\n\nexport function mapValues<V, V2>(\n  obj: Record<string, V>,\n  mapper: (value: V) => V2\n): Record<string, V2> {\n  const result: Record<string, V2> = {};\n  for (const key in obj) {\n    result[key] = mapper(obj[key]);\n  }\n  return result;\n}\n","import classNames from \"classnames\";\nimport React from \"react\";\n\nexport const isBrowser = typeof window !== \"undefined\";\nexport const NONE = Symbol(\"NONE\");\n\nexport const useIsomorphicLayoutEffect = isBrowser\n  ? React.useLayoutEffect\n  : React.useEffect;\n\nexport function createElementWithChildren(\n  elementType: any,\n  props: any,\n  children: React.ReactNode\n) {\n  if (Array.isArray(children)) {\n    return React.createElement(\n      elementType,\n      props,\n      ...children\n    ) as React.ReactElement;\n  } else if (children || \"children\" in props) {\n    // Only call React.createElement with `children` if there are actual children,\n    // or if there was an explicit (albeit undefined) children passed via\n    // props.  Otherwise, if you pass `undefined` as the children argument\n    // to React.createElement, the created element will have prop {children: undefined}.\n    // If the `root` is an PlasmicGeneratedComponent, and these props with {children: undefined}\n    // are used, then it will be taken as a `children` override, and will thus blank out\n    // everything under the root node.\n    return React.createElement(elementType, props, children);\n  } else {\n    return React.createElement(elementType, props);\n  }\n}\n\nexport function ensureNotArray(children: React.ReactNode) {\n  if (Array.isArray(children)) {\n    if (children.length === 1) {\n      return children[0];\n    } else {\n      return React.createElement(React.Fragment, {}, ...children);\n    }\n  } else {\n    return children;\n  }\n}\n\n/**\n * Flattens ReactNode into an array of ReactChild, but does NOT replace\n * missing keys with array index, as React.Children.toArray() does.\n */\nexport function toChildArray(children: React.ReactNode): React.ReactChild[] {\n  if (isReactChild(children)) {\n    return [children];\n  } else if (Array.isArray(children)) {\n    return children.flatMap(toChildArray);\n  } else {\n    return [];\n  }\n}\n\nexport function isReactText(child: React.ReactNode): child is React.ReactText {\n  return typeof child === \"string\" || typeof child === \"number\";\n}\n\nexport function isReactChild(\n  child: React.ReactNode\n): child is React.ReactChild {\n  return React.isValidElement(child) || isReactText(child);\n}\n\nexport function isReactFragment(\n  child: React.ReactNode\n): child is React.ReactElement {\n  return React.isValidElement(child) && child.type === React.Fragment;\n}\n\nexport function isReactNode(x: any) {\n  return (\n    typeof x === \"string\" || typeof x === \"number\" || React.isValidElement(x)\n  );\n}\n\n// From https://stackoverflow.com/questions/54775790/forcing-excess-property-checking-on-variable-passed-to-typescript-function\n// We also wrap the error message in a Partial<> because otherwise Jetbrains IDEs will autocomplete the component with all the string methods as props - see https://github.com/plasmicapp/plasmic/issues/16.\nexport type StrictProps<T, TExpected> = Exclude<\n  keyof T,\n  keyof TExpected\n> extends never\n  ? {}\n  : Partial<\"Unexpected extraneous props\">;\n\nexport type HTMLElementRefOf<T extends keyof JSX.IntrinsicElements> = Exclude<\n  React.ComponentProps<T>[\"ref\"],\n  string\n>;\n\nexport function mergeProps(\n  props: Record<string, any>,\n  ...restProps: Record<string, any>[]\n): Record<string, any> {\n  if (restProps.every((rest) => Object.keys(rest).length === 0)) {\n    return props;\n  }\n\n  const result = { ...props };\n\n  for (const rest of restProps) {\n    for (const key of Object.keys(rest)) {\n      result[key] = mergePropVals(key, result[key], rest[key]);\n    }\n  }\n\n  return result;\n}\n\nfunction updateRef<T>(ref: React.Ref<T> | undefined, value: T | null) {\n  if (!ref) {\n    return;\n  }\n\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else {\n    if (!Object.isFrozen(ref)) {\n      (ref as React.MutableRefObject<T | null>).current = value;\n    }\n  }\n}\n\nexport function mergeRefs<T>(...refs: (React.Ref<T> | undefined)[]) {\n  return (value: T) => {\n    for (const ref of refs) {\n      updateRef(ref, value);\n    }\n  };\n}\n\nexport function mergePropVals(name: string, val1: any, val2: any): any {\n  if (val1 === NONE || val2 === NONE) {\n    // The NONE sentinel always skips all merging and returns null\n    return null;\n  } else if (val1 == null) {\n    // If either of them is nil, prefer the other\n    return val2;\n  } else if (val2 == null) {\n    return val1;\n  } else if (name === \"className\") {\n    // Special case for className -- always combine both class names\n    return classNames(val1, val2);\n  } else if (name === \"style\") {\n    // Special case for style -- always shallow-merge style dicts\n    return { ...val1, ...val2 };\n  } else if (name === \"ref\") {\n    // Special case for ref\n    return mergeRefs(val1, val2);\n  } else if (typeof val1 !== typeof val2) {\n    // If the type of the two values are different, then no way to merge them.\n    // Prefer val2.\n    return val2;\n  } else if (name.startsWith(\"on\") && typeof val1 === \"function\") {\n    // Special case for event handlers -- always call both handlers\n    return (...args: any[]) => {\n      let res: any;\n      if (typeof val1 === \"function\") {\n        res = val1(...args);\n      }\n      if (typeof val2 === \"function\") {\n        res = val2(...args);\n      }\n      return res;\n    };\n  } else {\n    // For all else, prefer val2\n    return val2;\n  }\n}\n\nexport function getElementTypeName(element: React.ReactElement) {\n  if (typeof element.type === \"string\") {\n    return element.type;\n  } else {\n    const comp = element.type as any;\n    return comp.displayName ?? comp.name ?? comp.render?.name ?? \"Component\";\n  }\n}\n","import * as React from \"react\";\nimport { createElementWithChildren } from \"../react-utils\";\nimport { wrapFlexContainerChildren } from \"./elements\";\n\nfunction renderStack<T extends keyof JSX.IntrinsicElements>(\n  as: T,\n  props: React.ComponentProps<T>,\n  hasGap: boolean | undefined,\n  ref: React.Ref<any>\n) {\n  const { children, ...rest } = props;\n  const wrappedChildren = wrapFlexContainerChildren(children, hasGap ?? false);\n  return createElementWithChildren(as, { ref, ...rest }, wrappedChildren);\n}\n\nfunction FlexStack_<T extends keyof JSX.IntrinsicElements = \"div\">(\n  props: { as?: T; hasGap?: boolean } & React.ComponentProps<T>,\n  outerRef: React.Ref<any>\n) {\n  const { as, hasGap, ...rest } = props;\n  return renderStack(\n    as ?? \"div\",\n    rest as React.ComponentProps<T>,\n    hasGap,\n    outerRef\n  );\n}\n\nconst FlexStack = React.forwardRef(FlexStack_) as <\n  T extends keyof JSX.IntrinsicElements = \"div\"\n>(\n  props: { as?: T; hasGap?: boolean } & React.ComponentProps<T>\n) => React.ReactElement;\n\nconst makeStackImpl = <T extends keyof JSX.IntrinsicElements>(as: T) => {\n  return React.forwardRef(\n    (\n      props: React.ComponentProps<T> & { hasGap?: boolean },\n      ref: React.Ref<any>\n    ) => {\n      const { hasGap, ...rest } = props;\n      return renderStack(as, rest as React.ComponentProps<T>, hasGap, ref);\n    }\n  ) as React.FC<React.ComponentProps<T> & { hasGap?: boolean }>;\n};\n\nexport const Stack = Object.assign(FlexStack, {\n  div: makeStackImpl(\"div\"),\n  a: makeStackImpl(\"a\"),\n  button: makeStackImpl(\"button\"),\n  h1: makeStackImpl(\"h1\"),\n  h2: makeStackImpl(\"h2\"),\n  h3: makeStackImpl(\"h3\"),\n  h4: makeStackImpl(\"h4\"),\n  h5: makeStackImpl(\"h5\"),\n  h6: makeStackImpl(\"h6\"),\n  label: makeStackImpl(\"label\"),\n  form: makeStackImpl(\"form\"),\n  section: makeStackImpl(\"section\"),\n  head: makeStackImpl(\"head\"),\n  main: makeStackImpl(\"main\"),\n  nav: makeStackImpl(\"nav\"),\n});\n","import get from \"dlv\";\nimport * as React from \"react\";\nimport { chainSingleArgFuncs, isSubset, notNil, omit, pick } from \"../common\";\nimport {\n  createElementWithChildren,\n  ensureNotArray,\n  isReactNode,\n  mergeProps,\n  mergePropVals,\n  NONE,\n} from \"../react-utils\";\nimport { $State } from \"../states\";\nimport { Stack } from \"./Stack\";\n\ninterface Variants {\n  [vg: string]: any;\n}\n\nexport type MultiChoiceArg<M extends string> = M | M[] | { [v in M]?: boolean };\nexport type SingleChoiceArg<M extends string> = M;\nexport type SingleBooleanChoiceArg<M extends string> = M | boolean;\n\ninterface OverrideTwiddle {\n  wrapChildren?: (children: React.ReactNode) => React.ReactNode;\n  wrap?: (node: React.ReactNode) => React.ReactNode;\n}\n\nexport type DefaultOverride<C extends React.ElementType> = {\n  type: \"default\";\n  props?: Partial<React.ComponentProps<C>>;\n} & OverrideTwiddle;\n\nexport type AsOverride<C extends React.ElementType> = {\n  type: \"as\";\n  as: C;\n  props?: Partial<React.ComponentProps<C>>;\n} & OverrideTwiddle;\n\nexport type RenderOverride<C extends React.ElementType> = {\n  type: \"render\";\n  render: (props: React.ComponentProps<C>, Comp: C) => React.ReactNode;\n  props?: Partial<React.ComponentProps<C>>;\n} & OverrideTwiddle;\n\nexport type Override<DefaultElementType extends React.ElementType> =\n  | DefaultOverride<DefaultElementType>\n  | AsOverride<any>\n  | RenderOverride<DefaultElementType>;\n\nexport type Overrides = Record<string, Flex<any>>;\nexport type Args = Record<string, any>;\n\n// Flex provides a more \"flexible\" way to specify bindings.\nexport type Flex<DefaultElementType extends React.ElementType> =\n  // Fully-specified bindings\n  | (Omit<DefaultOverride<DefaultElementType>, \"type\"> & {\n      as?: never;\n      render?: never;\n    })\n  | Omit<AsOverride<any>, \"type\">\n  | (Omit<RenderOverride<DefaultElementType>, \"type\"> & {\n      as?: never;\n    })\n\n  // Valid ReactNode, used as children.\n  // Note: We use React.ReactChild instead of React.ReactNode because we don't want to include\n  // React.ReactFragment, which includes {}, which would allow any object to be passed in,\n  // defeating any attempt to type-check!\n  | React.ReactChild\n\n  // Ignored\n  | null\n  | undefined\n\n  // dict of props for the DefaultElementType\n  | (Partial<React.ComponentProps<DefaultElementType>> & {\n      wrap?: never;\n      wrapChildren?: never;\n      props?: never;\n      as?: never;\n      render?: never;\n    })\n\n  // render function taking in dict of props for the DefaultElementType\n  | ((props: React.ComponentProps<DefaultElementType>) => React.ReactNode);\n\nexport function hasVariant<V extends Variants>(\n  variants: V | undefined,\n  groupName: keyof V,\n  variant: string\n) {\n  if (variants == null) {\n    return false;\n  }\n  const groupVariants = variants[groupName];\n  if (groupVariants == null) {\n    return false;\n  } else if (groupVariants === true) {\n    return variant === groupName;\n  } else if (groupVariants === false) {\n    return false;\n  } else if (Array.isArray(groupVariants)) {\n    return groupVariants.includes(variant);\n  } else if (typeof groupVariants === \"string\") {\n    return groupVariants === variant;\n  } else {\n    return (\n      groupVariants[variant] !== undefined && groupVariants[variant] !== false\n    );\n  }\n}\n\nexport function wrapFlexContainerChildren(\n  children: React.ReactNode,\n  hasGap: boolean\n) {\n  // We need to always wrap the children, even if there are no gaps, because\n  // otherwise if we toggle between with and without gap, React reconciliation\n  // will blow away the children tree and all state if we switch from having\n  // a wrapper and not.\n  const className = hasGap ? \"__wab_flex-container\" : \"__wab_passthrough\";\n  if (!children) {\n    return null;\n  } else if (Array.isArray(children)) {\n    return React.createElement(\"div\", { className }, ...children);\n  } else {\n    return React.createElement(\"div\", { className }, children);\n  }\n}\n\nfunction createPlasmicElement<DefaultElementType extends React.ElementType>(\n  override: Flex<DefaultElementType>,\n  defaultRoot: DefaultElementType,\n  defaultProps: Partial<React.ComponentProps<DefaultElementType>>,\n  wrapChildrenInFlex?: boolean\n): React.ReactNode | null {\n  if (!override || Object.keys(override).length === 0) {\n    return createElementWithChildren(\n      defaultRoot,\n      defaultProps,\n      defaultProps.children\n    );\n  }\n  const override2 = deriveOverride(override);\n  const props = mergeOverrideProps(defaultProps, override2.props);\n  if (override2.type === \"render\") {\n    return override2.render(\n      props as React.ComponentProps<DefaultElementType>,\n      defaultRoot\n    );\n  }\n\n  let root = defaultRoot;\n  if (override2.type === \"as\" && override2.as) {\n    if (defaultRoot === (Stack as React.ElementType)) {\n      // If there was an \"as\" override specified, but the default type is\n      // a Stack, then we don't want to switch to using \"as\" as the root,\n      // because then we'd lose the flex wrapper that Stack provides.\n      // Instead, we specify the \"as\" as the \"as\" prop to Stack.\n      props.as = override2.as;\n    } else {\n      root = override2.as;\n    }\n  }\n\n  let children = props.children;\n\n  if (override2.wrapChildren) {\n    children = override2.wrapChildren(ensureNotArray(children));\n  }\n\n  if (wrapChildrenInFlex) {\n    // For legacy, we still support data-plasmic-wrap-flex-children\n    children = wrapFlexContainerChildren(children, true);\n  }\n\n  let result = createElementWithChildren(root, props, children);\n\n  if (override2.wrap) {\n    result = override2.wrap(result) as React.ReactElement;\n  }\n\n  return result;\n}\n\n// We use data-plasmic-XXX attributes for custom properties since Typescript doesn't\n// support type check on jsx pragma. See https://github.com/microsoft/TypeScript/issues/21699\n// for more info.\nconst seenElements = new Map<string, React.ReactNode>();\nexport function createPlasmicElementProxy<\n  DefaultElementType extends React.ElementType\n>(\n  defaultElement: DefaultElementType,\n  props: Partial<React.ComponentProps<DefaultElementType>>,\n  ...children: React.ReactNode[]\n) {\n  // We use seenElements to keep track of elements that has been rendered by\n  // createPlasmicElementProxy().  When a JSX tree is evaluated, the JSX factory\n  // is invoked from the leaf to the root as the last call.  So we can store\n  // all the elements we've created until we encounter the leaf, at which point\n  // we will clear this map.  We are guaranteed that this map will only contain\n  // elements from one Plasmic* component at a time, because we're just creating\n  // elements and not \"rendering\" at this point; even if this JSX tree references\n  // other Plasmic* elements, we'll just create an element referencing that component,\n  // rather than following into the content of that component.\n  //\n  // TODO: is this ConcurrentMode friendly?\n\n  if (props == null) {\n    props = {};\n  }\n\n  const name = props[\"data-plasmic-name\"];\n  const isRoot = props[\"data-plasmic-root\"];\n  const forNodeName = props[\"data-plasmic-for-node\"];\n\n  delete props[\"data-plasmic-name\"];\n  delete props[\"data-plasmic-root\"];\n  delete props[\"data-plasmic-for-node\"];\n\n  const element = createPlasmicElementFromJsx(\n    defaultElement,\n    props,\n    ...children\n  );\n  if (name) {\n    seenElements.set(name, element);\n  }\n\n  if (isRoot) {\n    // If this is the root, and we requested a specific node by specifying data-plasmic-for-node,\n    // then return that node instead\n    const forNode = forNodeName\n      ? seenElements.get(forNodeName) ?? null\n      : element;\n\n    // Clear out the seenElements map, as we're done rendering this Plasmic* component.\n    seenElements.clear();\n    return forNode;\n  }\n  return element;\n}\n\nfunction createPlasmicElementFromJsx<\n  DefaultElementType extends React.ElementType\n>(\n  defaultElement: DefaultElementType,\n  props: Partial<React.ComponentProps<DefaultElementType>>,\n  ...children: React.ReactNode[]\n) {\n  const override = props[\"data-plasmic-override\"];\n  const wrapFlexChild = props[\"data-plasmic-wrap-flex-child\"];\n  const triggerProps = (props[\"data-plasmic-trigger-props\"] ??\n    []) as React.HTMLAttributes<HTMLElement>[];\n  delete props[\"data-plasmic-override\"];\n  delete props[\"data-plasmic-wrap-flex-child\"];\n  delete props[\"data-plasmic-trigger-props\"];\n  return createPlasmicElement(\n    override,\n    defaultElement,\n    mergeProps(\n      props,\n      children.length === 0\n        ? {}\n        : { children: children.length === 1 ? children[0] : children },\n      ...triggerProps\n    ) as any,\n    wrapFlexChild\n  );\n}\n\nexport function makeFragment(...children: React.ReactNode[]) {\n  return React.createElement(React.Fragment, {}, ...children);\n}\n\nexport const UNSET = Symbol(\"UNSET\");\n\nfunction mergeOverrideProps(\n  defaults: Record<string, any>,\n  overrides?: Record<string, any>\n): Record<string, any> {\n  if (!overrides) {\n    return defaults;\n  }\n\n  const result = { ...defaults };\n\n  for (const key of Object.keys(overrides)) {\n    const defaultVal = defaults[key];\n    let overrideVal = overrides[key];\n    if (overrideVal === UNSET) {\n      delete result[key];\n    } else {\n      // We use the NONE sentinel if the overrideVal is nil, and is not one of the\n      // props that we merge by default -- which are className, style, and\n      // event handlers.  This means for all other \"normal\" props -- like children,\n      // title, etc -- a nil value will unset the default.\n      if (\n        overrideVal == null &&\n        key !== \"className\" &&\n        key !== \"style\" &&\n        !(key.startsWith(\"on\") && typeof defaultVal === \"function\")\n      ) {\n        overrideVal = NONE;\n      }\n      result[key] = mergePropVals(key, defaultVal, overrideVal);\n    }\n  }\n\n  return result;\n}\n\nexport function wrapWithClassName(element: React.ReactNode, className: string) {\n  const key = React.isValidElement(element)\n    ? element.key || undefined\n    : undefined;\n  return React.createElement(\n    \"div\",\n    {\n      key,\n      className,\n      style: {\n        display: \"grid\",\n      },\n    },\n    element\n  );\n}\n\nfunction deriveOverride<C extends React.ElementType>(x: Flex<C>): Override<C> {\n  if (!x) {\n    // undefined Binding is an empty Binding\n    return {\n      type: \"default\",\n      props: {} as any,\n    };\n  } else if (isReactNode(x)) {\n    // If ReactNode, then assume this is the children\n    return {\n      type: \"default\",\n      props: {\n        children: x,\n      } as any,\n    };\n  } else if (typeof x === \"object\") {\n    // If any of the overrideKeys is a key of this object, then assume\n    // this is a full Override\n    if (\"as\" in x) {\n      return {\n        ...x,\n        props: x.props || {},\n        type: \"as\",\n      } as any;\n    } else if (\"render\" in x) {\n      return {\n        ...x,\n        type: \"render\",\n      } as any;\n    } else if (\"props\" in x) {\n      return {\n        ...x,\n        props: x.props || {},\n        type: \"default\",\n      };\n    } else if (isSubset(Object.keys(x), [\"wrap\", \"wrapChildren\"])) {\n      // Only twiddling functions present, so assume no props overrides\n      // (otherwise we'd assume these were props).\n      return {\n        ...x,\n        props: {},\n        type: \"default\",\n      };\n    }\n\n    // Else, assume this is just a props object.\n    return {\n      type: \"default\",\n      props: x as any,\n    };\n  } else if (typeof x === \"function\") {\n    return {\n      type: \"render\",\n      render: x,\n    };\n  }\n\n  throw new Error(`Unexpected override: ${x}`);\n}\n\nfunction mergeVariants<V extends Variants>(\n  v1: Partial<V> | undefined,\n  v2: Partial<V> | undefined\n): Partial<V> {\n  if (!v1 || !v2) {\n    return v1 || v2 || {};\n  }\n  return { ...v1, ...v2 };\n}\n\nexport function mergeVariantsWithStates(\n  variants: Variants,\n  $state: $State,\n  linkedStates: {\n    variantGroup: string;\n    statePath: (string | number)[];\n  }[]\n): Variants {\n  return {\n    ...variants,\n    ...Object.fromEntries(\n      linkedStates.map(({ variantGroup, statePath }) => [\n        variantGroup,\n        get($state, statePath),\n      ])\n    ),\n  };\n}\n\nfunction mergeArgs<A extends Args>(\n  a1: Partial<A> | undefined,\n  a2: Partial<A> | undefined\n): Partial<A> {\n  if (!a1 || !a2) {\n    return a1 || a2 || {};\n  }\n  return { ...a1, ...a2 };\n}\n\nfunction mergeFlexOverrides<O extends Overrides>(\n  o1: Partial<O>,\n  o2: Partial<O> | undefined\n): Partial<O> {\n  if (!o2) {\n    return o1;\n  }\n  const keys = Array.from(new Set([...Object.keys(o1), ...Object.keys(o2)]));\n  const merged: Record<string, any> = {};\n  for (const key of keys) {\n    merged[key] = mergeFlexOverride(o1[key], o2[key]);\n  }\n  return merged as Partial<O>;\n}\n\nfunction mergeFlexOverride<C extends React.ElementType<any>>(\n  fo1: Flex<C> | undefined,\n  fo2: Flex<C> | undefined\n): Flex<C> | undefined {\n  if (!fo1) {\n    return fo2;\n  }\n  if (!fo2) {\n    return fo1;\n  }\n\n  const o1 = deriveOverride(fo1);\n  const o2 = deriveOverride(fo2);\n  const wrap = chainSingleArgFuncs(...[o1.wrap, o2.wrap].filter(notNil));\n  const wrapChildren = chainSingleArgFuncs(\n    ...[o1.wrapChildren, o2.wrapChildren].filter(notNil)\n  );\n\n  // \"render\" type always takes precedence, but we still merge the props\n  const props = mergeOverrideProps(o1.props ?? {}, o2.props) as Partial<\n    React.ComponentProps<C>\n  >;\n  if (o2.type === \"render\") {\n    return {\n      render: o2.render,\n      props,\n      wrap,\n      wrapChildren,\n    };\n  }\n\n  if (o1.type === \"render\") {\n    return {\n      render: o1.render,\n      props,\n      wrap,\n      wrapChildren,\n    };\n  }\n\n  // \"as\" will take precedence\n  const as =\n    (o2.type === \"as\" ? o2.as : undefined) ??\n    (o1.type === \"as\" ? o1.as : undefined);\n\n  return {\n    props,\n    wrap,\n    wrapChildren,\n    ...(as ? { as } : {}),\n  };\n}\n\nexport function deriveRenderOpts(\n  props: Record<string, any>,\n  config: {\n    name: string;\n    descendantNames: string[];\n    internalVariantPropNames: string[];\n    internalArgPropNames: string[];\n  }\n) {\n  const {\n    name,\n    descendantNames,\n    internalVariantPropNames,\n    internalArgPropNames,\n  } = config;\n  const reservedPropNames = [\"variants\", \"args\", \"overrides\"];\n  const variants = mergeVariants(\n    omit(pick(props, ...internalVariantPropNames), ...reservedPropNames),\n    props.variants\n  );\n  const args = mergeArgs(\n    omit(pick(props, ...internalArgPropNames), ...reservedPropNames),\n    props.args\n  );\n  let overrides = mergeFlexOverrides(\n    omit(\n      pick(props, ...descendantNames),\n      ...internalArgPropNames,\n      ...internalVariantPropNames,\n      ...reservedPropNames\n    ),\n    props.overrides\n  );\n\n  const leftoverProps = omit(\n    props,\n    \"variants\",\n    \"args\",\n    \"overrides\",\n    ...descendantNames,\n    ...internalVariantPropNames,\n    ...internalArgPropNames\n  ) as Partial<React.ComponentProps<\"button\">>;\n\n  if (Object.keys(leftoverProps).length > 0) {\n    overrides = mergeFlexOverrides(overrides, {\n      [name]: {\n        props: leftoverProps,\n      },\n    });\n  }\n  return { variants, args, overrides };\n}\n","const isDefaultValue = (val: string) => val === \"PLEASE_RENDER_INSIDE_PROVIDER\";\nconst seenDefaultVariants: Record<string, boolean> = {};\nexport function ensureGlobalVariants<T extends Record<string, any>>(\n  globalVariantValues: T\n) {\n  Object.entries(globalVariantValues)\n    .filter(([_, value]) => isDefaultValue(value))\n    .forEach(([key, _]) => {\n      (globalVariantValues as any)[key] = undefined;\n\n      if (!seenDefaultVariants[key] && process.env.NODE_ENV === \"development\") {\n        seenDefaultVariants[key] = true;\n        const providerName = `${key[0].toUpperCase()}${key.substring(\n          1\n        )}Context.Provider`;\n        console.warn(\n          `Plasmic context value for global variant \"${key}\" was not provided; please use ${providerName} at the root of your React app. Learn More: https://www.plasmic.app/learn/other-assets/#global-variants`\n        );\n      }\n    });\n  return globalVariantValues;\n}\n","import * as React from \"react\";\n\nexport const PlasmicHeadContext = React.createContext<\n  React.ComponentType<any> | undefined\n>(undefined);\n\ntype PlasmicHeadProps = {\n  title?: string;\n  description?: string;\n  image?: string;\n  canonical?: string;\n};\n\nexport function PlasmicHead(props: PlasmicHeadProps) {\n  const Head = React.useContext(PlasmicHeadContext);\n  if (!Head) {\n    console.warn(\n      `Plasmic: Head meta tags are being ignored. To make them work, pass a Head component into PlasmicRootProvider.`\n    );\n    // TODO: Link to doc about Head.\n    return null;\n  }\n\n  // Helmet does not support React.Fragments, so we need to use `[<meta />,\n  // <meta />]` instead of `<><meta /><meta /></>`.\n  return (\n    <Head>\n      {props.image ? (\n        [\n          <meta\n            key=\"twitter:card\"\n            name=\"twitter:card\"\n            content=\"summary_large_image\"\n          />,\n          <meta key=\"og:image\" property=\"og:image\" content={props.image} />,\n          <meta\n            key=\"twitter:image\"\n            name=\"twitter:image\"\n            content={props.image}\n          />,\n        ]\n      ) : (\n        <meta key=\"twitter:card\" name=\"twitter:card\" content=\"summary\" />\n      )}\n      {props.title && [\n        <title key=\"title\">{props.title}</title>,\n        <meta key=\"og:title\" property=\"og:title\" content={props.title} />,\n        <meta\n          key=\"twitter:title\"\n          property=\"twitter:title\"\n          content={props.title}\n        />,\n      ]}\n      {props.description && [\n        <meta\n          key=\"description\"\n          name=\"description\"\n          content={props.description}\n        />,\n        <meta\n          key=\"og:description\"\n          property=\"og:description\"\n          content={props.description}\n        />,\n        <meta\n          key=\"twitter:description\"\n          name=\"twitter:description\"\n          content={props.description}\n        />,\n      ]}\n      {props.canonical && (\n        <link key=\"canonical\" ref=\"canonical\" href={props.canonical} />\n      )}\n    </Head>\n  );\n}\n\nexport const plasmicHeadMeta = {\n  name: \"hostless-plasmic-head\",\n  displayName: \"Head\",\n  description: \"Used to add page metadata to HTML <head />.\",\n  importName: \"PlasmicHead\",\n  importPath: \"@plasmicapp/react-web\",\n  isRepeatable: false,\n  styleSections: false,\n  props: {\n    title: {\n      type: \"string\",\n      displayName: \"Title\",\n    },\n    description: {\n      type: \"string\",\n      displayName: \"Description\",\n    },\n    image: {\n      type: \"imageUrl\",\n      displayName: \"Image\",\n    },\n    canonical: {\n      type: \"string\",\n      displayName: \"Canonical URL\",\n    },\n  },\n};\n","import * as React from \"react\";\n\nexport function PlasmicIcon(\n  props: React.ComponentProps<\"svg\"> & {\n    PlasmicIconType: React.ComponentType;\n  }\n) {\n  const { PlasmicIconType, ...rest } = props;\n  return <PlasmicIconType {...rest} />;\n}\n","/**\n * Responsive `<img/>` replacement, based on `next/image`\n */\n\nimport classNames from \"classnames\";\nimport React, { CSSProperties } from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeRefs } from \"../../react-utils\";\n\nexport interface ImageLoader {\n  supportsUrl: (url: string) => boolean;\n  transformUrl: (opts: {\n    src: string;\n    width?: number;\n    quality?: number;\n    format?: \"webp\";\n  }) => string;\n}\n\ntype ImgTagProps = Omit<\n  React.ComponentProps<\"img\">,\n  \"src\" | \"srcSet\" | \"ref\" | \"style\"\n>;\n\n// Default image sizes to snap to\n// TODO: make this configurable?\nconst IMG_SIZES = [16, 32, 48, 64, 96, 128, 256, 384];\nconst DEVICE_SIZES = [640, 750, 828, 1080, 1200, 1920, 2048, 3840];\nconst ALL_SIZES = [...IMG_SIZES, ...DEVICE_SIZES];\n\nexport interface PlasmicImgProps extends ImgTagProps {\n  /**\n   * Either an object with the src string, and its full width and height,\n   * or just a src string with unknown intrinsic dimensions.\n   */\n  src?:\n    | string\n    | {\n        src:\n          | string\n          | {\n              src: string;\n              height: number;\n              width: number;\n              blurDataURL?: string;\n            };\n        fullHeight: number;\n        fullWidth: number;\n        // We might also get a more precise aspectRatio for SVGs\n        // instead of relyiing on fullWidth / fullHeight, because\n        // those values might be rounded and not so accurate.\n        aspectRatio?: number;\n      };\n\n  /**\n   * className applied to the wrapper element if one is used.\n   */\n  className?: string;\n\n  /**\n   * css width\n   */\n  displayWidth?: number | string;\n\n  /**\n   * css height\n   */\n  displayHeight?: number | string;\n\n  /**\n   * css min-width\n   */\n  displayMinWidth?: number | string;\n\n  /**\n   * css min-height\n   */\n  displayMinHeight?: number | string;\n\n  /**\n   * css max-width\n   */\n  displayMaxWidth?: number | string;\n\n  /**\n   * css max-height\n   */\n  displayMaxHeight?: number | string;\n\n  /**\n   * For variable quality formats like jpg, the quality from 0 to 100\n   */\n  quality?: number;\n\n  /**\n   * ImageLoader to use for loading different dimensions of the image.\n   * If none specified, will not attempt to load different dimensions.\n   */\n  loader?: \"plasmic\" | ImageLoader;\n\n  /**\n   * Style applied to the wrapper element. objectFit and objectPosition\n   * rules are applied to the img element.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * Ref for the img element.  The normal <PlasmicImg ref={...} />\n   * prop gives the root element instead, which may be the img element\n   * or a wrapper element\n   */\n  imgRef?: React.Ref<HTMLImageElement>;\n}\n\nexport const PlasmicImg = React.forwardRef(function PlasmicImg(\n  props: PlasmicImgProps,\n  outerRef: React.Ref<HTMLElement>\n) {\n  let {\n    src,\n    className,\n    displayWidth,\n    displayHeight,\n    displayMinWidth,\n    displayMinHeight,\n    displayMaxWidth,\n    displayMaxHeight,\n    quality,\n    loader,\n    imgRef,\n    style,\n    loading,\n    ...rest\n  } = props;\n\n  const imgProps = Object.assign({}, rest, {\n    // Default loading to \"lazy\" if not specified (which is different from the\n    // html img, which defaults to eager!)\n    loading: loading ?? \"lazy\",\n  });\n\n  const { fullWidth, fullHeight, aspectRatio } =\n    typeof src === \"string\" || !src\n      ? { fullWidth: undefined, fullHeight: undefined, aspectRatio: undefined }\n      : src;\n  const srcStr = src\n    ? typeof src === \"string\"\n      ? src\n      : typeof src.src === \"string\"\n      ? src.src\n      : src.src.src\n    : \"\";\n\n  // Assume external image if either dimension is null and use usual <img>\n  if (fullHeight == null || fullWidth == null) {\n    return (\n      <img\n        src={srcStr}\n        className={className}\n        style={style}\n        {...imgProps}\n        loading={loading}\n        ref={mergeRefs(imgRef, outerRef) as any}\n      />\n    );\n  }\n\n  if (\n    isSvg(srcStr) &&\n    (displayHeight == null || displayHeight === \"auto\") &&\n    (displayWidth == null || displayWidth === \"auto\")\n  ) {\n    displayWidth = \"100%\";\n  }\n\n  let computedDisplayWidth = displayWidth;\n  if (\n    fullWidth &&\n    fullHeight &&\n    (!displayWidth || displayWidth === \"auto\") &&\n    !!getPixelLength(displayHeight)\n  ) {\n    // If there's a pixel length specified for displayHeight but not displayWidth,\n    // then we can derive the pixel length for displayWidth.  Having an explicit\n    // displayWidth makes this a fixed-size image, which makes it possible for us to\n    // generate better markup!\n    if (!isSvg(srcStr)) {\n      // We shouldn't do it for SVGs though, because `fullWidth` and\n      // `fullHeight` might have rounded values so the final\n      // `displayWidth` could differ by 1px or so.\n      computedDisplayWidth =\n        (getPixelLength(displayHeight)! * fullWidth) / fullHeight;\n    }\n  }\n\n  let spacerWidth = fullWidth;\n  let spacerHeight = fullHeight;\n  if (aspectRatio && isFinite(aspectRatio) && isSvg(srcStr)) {\n    // For SVGs, fullWidth and fullHeight can be rounded values, which would\n    // cause some discrepancy between the actual aspect ratio and the aspect\n    // ratio from those values. So, for those cases, we set large width / height\n    // values to get a more precise ratio from the spacer.\n    spacerWidth = DEFAULT_SVG_WIDTH;\n    spacerHeight = Math.round(spacerWidth / aspectRatio);\n  }\n\n  const { sizes, widthDescs } = getWidths(computedDisplayWidth, fullWidth, {\n    minWidth: displayMinWidth,\n  });\n  const imageLoader = getImageLoader(loader);\n  const spacerSvg = `<svg width=\"${spacerWidth}\" height=\"${spacerHeight}\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"/>`;\n  const spacerSvgBase64 =\n    typeof window === \"undefined\"\n      ? Buffer.from(spacerSvg).toString(\"base64\")\n      : window.btoa(spacerSvg);\n\n  let wrapperStyle: CSSProperties = { ...(style || {}) };\n  let spacerStyle: CSSProperties = {\n    ...pick(style || {}, \"objectFit\", \"objectPosition\"),\n  };\n\n  if (displayWidth != null && displayWidth !== \"auto\") {\n    // If width is set, set it on the wrapper along with min/max width\n    // and just use `width: 100%` on the spacer\n    spacerStyle.width = \"100%\";\n    // Rely on the styles set by `classname` on the wrapper:\n    // wrapperStyle.width = displayWidth;\n    // wrapperStyle.minWidth = displayMinWidth;\n    // wrapperStyle.maxWidth = displayMaxWidth;\n  } else {\n    // Otherwise, we want auto sizing from the spacer, so set width there.\n    //\n    // But if we have min/max width, it should be set in the wrapper and it\n    // can be percentage values (and we add corresponding min/max width to\n    // 100% in the spacer). In general it ends up with the correct effect,\n    // but some edge cases might make `min-width: 100%` shrink the image more\n    // than it should.\n    spacerStyle.width = displayWidth;\n    wrapperStyle.width = \"auto\";\n    if (displayMinWidth) {\n      spacerStyle.minWidth = \"100%\";\n      // Rely on min-width set by `classname` on the wrapper:\n      // wrapperStyle.minWidth = displayMinWidth;\n    }\n    if (displayMaxWidth != null && displayMaxWidth !== \"none\") {\n      spacerStyle.maxWidth = \"100%\";\n      // Rely on max-width set by `classname` on the wrapper:\n      // wrapperStyle.maxWidth = displayMaxWidth;\n    }\n  }\n\n  if (displayHeight != null && displayHeight !== \"auto\") {\n    spacerStyle.height = \"100%\";\n    // wrapperStyle.height = displayHeight;\n    // wrapperStyle.minHeight = displayMinHeight;\n    // wrapperStyle.maxHeight = displayMaxHeight;\n  } else {\n    spacerStyle.height = displayHeight;\n    wrapperStyle.height = \"auto\";\n    if (displayMinHeight) {\n      spacerStyle.minHeight = \"100%\";\n      // wrapperStyle.minHeight = displayMinHeight;\n    }\n    if (displayMaxHeight != null && displayMaxHeight !== \"none\") {\n      spacerStyle.maxHeight = \"100%\";\n      // wrapperStyle.maxHeight = displayMaxHeight;\n    }\n  }\n\n  return (\n    <div\n      className={classNames(className, \"__wab_img-wrapper\")}\n      ref={outerRef as any}\n      style={wrapperStyle}\n    >\n      <img\n        alt=\"\"\n        aria-hidden\n        className=\"__wab_img-spacer-svg\"\n        src={`data:image/svg+xml;base64,${spacerSvgBase64}`}\n        style={spacerStyle}\n      />\n      {makePicture({\n        imageLoader,\n        widthDescs,\n        sizes,\n        src: srcStr,\n        quality,\n        ref: imgRef,\n        style: style ? pick(style, \"objectFit\", \"objectPosition\") : undefined,\n        imgProps,\n        className: \"__wab_img\",\n      })}\n    </div>\n  );\n});\n\nfunction makePicture(opts: {\n  imageLoader?: ImageLoader;\n  widthDescs: WidthDesc[];\n  sizes?: string;\n  src: string;\n  quality?: number;\n  style?: React.CSSProperties;\n  className?: string;\n  imgProps: ImgTagProps;\n  ref?: React.Ref<HTMLImageElement>;\n}) {\n  // If imageLoader is undefined, then this renders to just a normal\n  // <img />.  Else it will render to a <picture> with a <source> for\n  // webp, and srcSet/sizes set according to width requirements.\n  const {\n    imageLoader,\n    widthDescs,\n    src,\n    quality,\n    style,\n    className,\n    sizes,\n    imgProps,\n    ref,\n  } = opts;\n  return (\n    <picture className=\"__wab_picture\">\n      {imageLoader && imageLoader.supportsUrl(src) && (\n        <source\n          type=\"image/webp\"\n          srcSet={widthDescs\n            .map(\n              (wd) =>\n                `${imageLoader.transformUrl({\n                  src,\n                  quality,\n                  width: wd.width,\n                  format: \"webp\",\n                })} ${wd.desc}`\n            )\n            .join(\", \")}\n        />\n      )}\n      <img\n        {...imgProps}\n        ref={ref}\n        className={className}\n        decoding=\"async\"\n        src={\n          imageLoader && imageLoader.supportsUrl(src)\n            ? imageLoader.transformUrl({\n                src,\n                quality,\n                width: widthDescs[widthDescs.length - 1].width,\n              })\n            : src\n        }\n        srcSet={\n          imageLoader && imageLoader.supportsUrl(src)\n            ? widthDescs\n                .map(\n                  (wd) =>\n                    `${imageLoader.transformUrl({\n                      src,\n                      quality,\n                      width: wd.width,\n                    })} ${wd.desc}`\n                )\n                .join(\", \")\n            : undefined\n        }\n        sizes={imageLoader && imageLoader.supportsUrl(src) ? sizes : undefined}\n        style={{\n          ...(style ? pick(style, \"objectFit\", \"objectPosition\") : {}),\n          width: 0,\n          height: 0,\n        }}\n      />\n    </picture>\n  );\n}\n\nconst DEFAULT_SVG_WIDTH = 10000;\n\nfunction isSvg(src: string) {\n  return src.endsWith(\".svg\") || src.startsWith(\"data:image/svg\");\n}\n\ninterface WidthDesc {\n  width?: number;\n  desc: string;\n}\n\nfunction getClosestPresetSize(width: number, fullWidth: number) {\n  const nextBiggerIndex =\n    ALL_SIZES.findIndex((w) => w >= width) ?? ALL_SIZES.length - 1;\n  const nextBigger = ALL_SIZES[nextBiggerIndex];\n  if (nextBigger >= fullWidth) {\n    // If the requested width is larger than the fullWidth,\n    // we just use the original width instead. It's impossible\n    // to make an image bigger than fullWidth!\n    return undefined;\n  } else if (\n    nextBiggerIndex + 1 < ALL_SIZES.length &&\n    fullWidth <= ALL_SIZES[nextBiggerIndex + 1]\n  ) {\n    // If the fullWidth is just between nextBigger and the one after that,\n    // then also might as well just use the original size (so, width is 30,\n    // nextBigger is 32, then we just use the original as long as fullWidth is\n    // less than 48)\n    return undefined;\n  }\n\n  return nextBigger;\n}\n\n/**\n * Computes the appropriate srcSet and sizes to use\n */\nfunction getWidths(\n  width: number | string | undefined,\n  fullWidth: number,\n  extra?: { minWidth: string | number | undefined }\n): { sizes: string | undefined; widthDescs: WidthDesc[] } {\n  const minWidth = extra?.minWidth;\n  const pixelWidth = getPixelLength(width);\n  const pixelMinWidth = getPixelLength(minWidth);\n  if (pixelWidth != null && (!minWidth || pixelMinWidth != null)) {\n    // If there's an exact width, then we just need to display it at 1x and 2x density\n    return {\n      widthDescs: [\n        {\n          width: getClosestPresetSize(\n            Math.max(pixelWidth, pixelMinWidth ?? 0),\n            fullWidth\n          ),\n          desc: \"1x\",\n        },\n        {\n          width: getClosestPresetSize(\n            Math.max(pixelWidth, pixelMinWidth ?? 0) * 2,\n            fullWidth\n          ),\n          desc: \"2x\",\n        },\n      ],\n      sizes: undefined,\n    };\n  }\n  // Otherwise we don't know what sizes we'll end up, so we just cap it at\n  // device width.  TODO: do better!\n  const usefulSizes = DEVICE_SIZES.filter(\n    (size) => !fullWidth || size < fullWidth\n  );\n  if (!!fullWidth && usefulSizes.length === 0) {\n    // image fullWidth is smaller than all device sizes.  So all we can do\n    // is offer 1x\n    return {\n      widthDescs: [\n        {\n          width: getClosestPresetSize(fullWidth, fullWidth),\n          desc: \"1x\",\n        },\n      ],\n      sizes: undefined,\n    };\n  }\n  return {\n    widthDescs: usefulSizes.map((size) => ({\n      width: getClosestPresetSize(size, fullWidth),\n      // If this is the last (buggest) useful width, but it is\n      // still within the bounds set by DEVICE_SIZES, then just\n      // use the original, unresized image.  This means if we match\n      // the largest size, we use unresized and best quality image.\n      // We only do this, though, if fullWidth is \"reasonable\" --\n      // smaller than the largest size we would consider.\n      // i === usefulSizes.length - 1 &&\n      // fullWidth < DEVICE_SIZES[DEVICE_SIZES.length - 1]\n      //   ? undefined\n      //   : size,\n      desc: `${size}w`,\n    })),\n    sizes: \"100vw\",\n  };\n}\n\nfunction getPixelLength(length: number | string | undefined) {\n  if (length == null || length == \"\") {\n    return undefined;\n  }\n\n  if (typeof length === \"number\") {\n    return length;\n  }\n\n  const parsed = parseNumeric(length);\n  if (parsed && (!parsed.units || parsed.units === \"px\")) {\n    return parsed.num;\n  }\n\n  return undefined;\n}\n\nfunction parseNumeric(val: string) {\n  // Parse strings like \"30\", \"30px\", \"30%\", \"30px /* blah blah */\"\n  const res = val.match(\n    /^\\s*(-?(?:\\d+\\.\\d*|\\d*\\.\\d+|\\d+))\\s*([a-z]*|%)\\s*(?:\\/\\*.*)?$/i\n  );\n  if (res == null) {\n    return undefined;\n  }\n  const num = res[1];\n  const units = res[2];\n  return { num: +num, units };\n}\n\nfunction getImageLoader(loader: \"plasmic\" | ImageLoader | undefined) {\n  if (loader == null) {\n    return undefined;\n  } else if (loader === \"plasmic\") {\n    return PLASMIC_IMAGE_LOADER;\n  } else {\n    return loader;\n  }\n}\n\nconst PLASMIC_IMAGE_LOADER: ImageLoader = {\n  supportsUrl: (src) => {\n    return src.startsWith(\"https://img.plasmic.app\") && !isSvg(src);\n  },\n  transformUrl: (opts) => {\n    const params = [\n      opts.width ? `w=${opts.width}` : undefined,\n      `q=${opts.quality ?? 75}`,\n      opts.format ? `f=${opts.format}` : undefined,\n    ].filter((x) => !!x);\n    return `${opts.src}?${params.join(\"&\")}`;\n  },\n};\n","import React from \"react\";\nimport { omit, pick } from \"../common\";\n\nexport const PlasmicLink = React.forwardRef(function PlasmicLink(\n  props: any,\n  ref: React.Ref<any>\n) {\n  // props.href is required for nextjs; if no props.href,\n  // then we just render the default anchor element\n  if (props.platform === \"nextjs\" && props.href) {\n    const nextjsProps = [\n      \"href\",\n      \"replace\",\n      \"scroll\",\n      \"shallow\",\n      \"passHref\",\n      \"prefetch\",\n      \"locale\",\n    ];\n\n    return React.createElement(\n      props.component,\n      { ...pick(props, ...nextjsProps), legacyBehavior: true },\n      <a {...omit(props, \"component\", \"platform\", ...nextjsProps)} ref={ref} />\n    );\n  }\n\n  if (props.platform === \"gatsby\" && isInternalHref(props.href)) {\n    return React.createElement(props.component, {\n      ...omit(props, \"component\", \"platform\", \"href\"),\n      ...{ to: props.href, ref },\n    });\n  }\n\n  return <a {...omit(props, \"component\", \"platform\")} ref={ref} />;\n});\n\nfunction isInternalHref(href: string): boolean {\n  return /^\\/(?!\\/)/.test(href);\n}\n","import React from \"react\";\n\nexport type PlasmicTranslator = (\n  str: string,\n  opts?: {\n    components?: {\n      [key: string]: React.ReactElement;\n    };\n  }\n) => React.ReactNode;\n\nexport const PlasmicTranslatorContext = React.createContext<\n  PlasmicTranslator | undefined\n>(undefined);\n\nexport interface TransProps {\n  transKey?: string;\n  children?: React.ReactNode;\n}\n\nfunction isIterable(val: any): val is Iterable<any> {\n  return val != null && typeof val[Symbol.iterator] === \"function\";\n}\n\nexport function genTranslatableString(elt: React.ReactNode) {\n  const components: {\n    [key: string]: React.ReactElement;\n  } = {};\n  let componentsCount = 0;\n\n  const getText = (node: React.ReactNode): string => {\n    if (!node) {\n      return \"\";\n    }\n    if (\n      typeof node === \"number\" ||\n      typeof node === \"boolean\" ||\n      typeof node === \"string\"\n    ) {\n      return node.toString();\n    }\n    if (typeof node !== \"object\") {\n      return \"\";\n    }\n    if (Array.isArray(node) || isIterable(node)) {\n      return Array.from(node)\n        .map((child) => getText(child))\n        .filter((child) => !!child)\n        .join(\"\");\n    }\n    const nodeChildren: React.ReactNode =\n      (hasKey(node, \"props\") &&\n        hasKey(node.props, \"children\") &&\n        (node.props.children as React.ReactNode | undefined)) ||\n      (hasKey(node, \"children\") && node.children) ||\n      [];\n    const contents = `${React.Children.toArray(nodeChildren)\n      .map((child) => getText(child))\n      .filter((child) => !!child)\n      .join(\"\")}`;\n    if (React.isValidElement(node) && node.type === React.Fragment) {\n      return contents;\n    }\n    const componentId = componentsCount + 1;\n    componentsCount++;\n    components[componentId] = React.isValidElement(node)\n      ? React.cloneElement(node as any, {\n          key: componentId,\n          children: undefined,\n        })\n      : (node as never);\n    return `<${componentId}>${contents}</${componentId}>`;\n  };\n\n  const str = getText(elt);\n  return {\n    str,\n    components,\n    componentsCount,\n  };\n}\n\nexport function Trans({ transKey, children }: TransProps) {\n  const _t = React.useContext(PlasmicTranslatorContext);\n  if (!_t) {\n    warnNoTranslationFunctionAtMostOnce();\n    return children;\n  }\n\n  const { str, components, componentsCount } = genTranslatableString(children);\n  return _t(transKey ?? str, componentsCount > 0 ? { components } : undefined);\n}\n\nlet hasWarned = false;\nfunction warnNoTranslationFunctionAtMostOnce() {\n  if (!hasWarned) {\n    console.warn(\n      \"Using Plasmic Translation but no translation function has been provided\"\n    );\n    hasWarned = true;\n  }\n}\n\nfunction hasKey<K extends string>(v: any, key: K): v is Record<K, any> {\n  return typeof v === \"object\" && v !== null && key in v;\n}\n","import * as React from \"react\";\nimport { mergeProps } from \"../react-utils\";\nimport { Trans } from \"./translation\";\n\nexport function PlasmicSlot<T extends keyof JSX.IntrinsicElements = \"div\">(\n  props: React.ComponentProps<T> & {\n    as?: T;\n    defaultContents?: React.ReactNode;\n    value?: React.ReactNode;\n  }\n) {\n  return renderPlasmicSlot(props);\n}\n\nexport function renderPlasmicSlot<\n  T extends keyof JSX.IntrinsicElements = \"div\"\n>(opts: {\n  as?: T;\n  defaultContents?: React.ReactNode;\n  value?: React.ReactNode;\n}) {\n  const { as, defaultContents, value, ...rest } = opts;\n\n  let content = value === undefined ? defaultContents : value;\n  if (!content || (Array.isArray(content) && content.length === 0)) {\n    return null;\n  }\n\n  // If the content is a raw string, then we need to wrap the raw string\n  // into an element, in case the slot is inside a flex-gap\n  // container (you cannot apply margin to just a text node).\n  const maybeString = maybeAsString(content);\n  if (maybeString) {\n    content = <span className=\"__wab_slot-string-wrapper\">{maybeString}</span>;\n  }\n\n  const nonEmptyProps = Object.keys(rest).filter((p) => !!(rest as any)[p]);\n  if (nonEmptyProps.length === 0) {\n    // No attrs to apply to the slot (which means the slot is unstyled), then\n    // just render the content directly; no need for style wrapper.\n    return <>{content}</>;\n  }\n\n  return React.createElement(\n    as || \"span\",\n    mergeProps({ className: \"__wab_slot\" }, rest),\n    content\n  );\n}\n\nfunction maybeAsString(\n  node: React.ReactNode\n): string | React.ReactElement | undefined {\n  // Unwrap fragments\n  if (React.isValidElement(node)) {\n    // Fragment doesn't render DOM elements\n    if (node.type === React.Fragment) {\n      return maybeAsString(node.props.children);\n    } else if (node.type === Trans) {\n      // Trans also doesn't render DOM elements. But we don't want to just render\n      // its content string, because we want to keep the <Trans/> for the localization.\n      // So we render the same node, to be wrapped into __wab_slot-string-wrapper.\n      return node;\n    }\n  }\n\n  if (typeof node === \"string\") {\n    return node;\n  }\n\n  if (Array.isArray(node) && node.length === 1 && typeof node[0] === \"string\") {\n    return node[0];\n  }\n\n  return undefined;\n}\n","import * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { isBrowser, useIsomorphicLayoutEffect } from \"../react-utils\";\n\ntype Queries = { [name: string]: string };\n\nconst listeners: Array<() => void> = [];\nconst queries: Queries = {};\n\nfunction matchScreenVariants() {\n  if (!isBrowser) {\n    return [];\n  }\n  return Object.entries(queries)\n    .filter(([, query]) => window.matchMedia(query).matches)\n    .map(([name]) => name);\n}\n\n// undefined if screen variants have never been calculated\nlet curScreenVariants: string[] | undefined = undefined;\n\nfunction recalculateScreenVariants() {\n  const screenVariant = matchScreenVariants();\n  if (\n    !curScreenVariants ||\n    screenVariant.join(\"\") !== curScreenVariants.join(\"\")\n  ) {\n    curScreenVariants = screenVariant;\n    ReactDOM.unstable_batchedUpdates(() =>\n      listeners.forEach((listener) => listener())\n    );\n  }\n}\n\nfunction ensureInitCurScreenVariants() {\n  // Initializes curScreenVariants if it hadn't been before. Note that this must\n  // be called from within an effect.\n  if (curScreenVariants === undefined) {\n    curScreenVariants = matchScreenVariants();\n  }\n}\n\nif (isBrowser) {\n  window.addEventListener(\"resize\", recalculateScreenVariants);\n}\n\nexport function createUseScreenVariants(\n  isMulti: boolean,\n  screenQueries: Queries\n) {\n  Object.assign(queries, screenQueries);\n  curScreenVariants = undefined;\n\n  return function () {\n    // It is important that upon first render, we return [] or undefined, because\n    // that is what SSR will use, and the client must match.  In an effect (which\n    // only happens on the client), we then actually ask for the real screen variant\n    // and, if different from [] or undefined, forces a re-render.\n\n    const [, updateState] = React.useState<{}>();\n    const lastScreenVariantsRef = React.useRef<string[]>(\n      curScreenVariants || []\n    );\n\n    // We do useLayoutEffect instead of useEffect to immediately\n    // register our forceUpdate. This ensures that if there was\n    // a window resize event between render and effects, that the\n    // listener will be registered in time\n    useIsomorphicLayoutEffect(() => {\n      const updateIfChanged = () => {\n        if (\n          curScreenVariants &&\n          lastScreenVariantsRef.current.join(\"\") !== curScreenVariants.join(\"\")\n        ) {\n          lastScreenVariantsRef.current = curScreenVariants;\n          // Force update\n          updateState({});\n        }\n      };\n\n      // Listeners are invoked whenever the window is resized\n      listeners.push(updateIfChanged);\n\n      // Initialize the curScreenVariants for the first time.  We don't need\n      // to invoke the listeners here because all components will already\n      // have this effect running and will re-render if the real screen\n      // variant is non-empty.\n      ensureInitCurScreenVariants();\n\n      // Now, if the curScreenVariants differs from what we returned last,\n      // then force a re-render.\n      updateIfChanged();\n      return () => {\n        // Remove our listener on unmount\n        listeners.splice(listeners.indexOf(updateIfChanged), 1);\n      };\n    }, []);\n\n    if (isMulti) {\n      return curScreenVariants || [];\n    } else if (curScreenVariants) {\n      return curScreenVariants[curScreenVariants.length - 1];\n    } else {\n      return undefined;\n    }\n  };\n}\n","import {\n  PlasmicDataSourceContextProvider,\n  PlasmicDataSourceContextValue,\n} from \"@plasmicapp/data-sources-context\";\nimport { SSRProvider, useIsSSR as useAriaIsSSR } from \"@react-aria/ssr\";\nimport * as React from \"react\";\nimport { PlasmicHeadContext } from \"./PlasmicHead\";\nimport { PlasmicTranslator, PlasmicTranslatorContext } from \"./translation\";\nexport {\n  PlasmicDataSourceContextProvider,\n  useCurrentUser,\n} from \"@plasmicapp/data-sources-context\";\n\nexport interface PlasmicRootContextValue {\n  platform?: \"nextjs\" | \"gatsby\";\n}\n\nconst PlasmicRootContext = React.createContext<\n  PlasmicRootContextValue | undefined\n>(undefined);\n\nexport interface PlasmicRootProviderProps\n  extends PlasmicDataSourceContextValue {\n  platform?: \"nextjs\" | \"gatsby\";\n  children?: React.ReactNode;\n  translator?: PlasmicTranslator;\n  Head?: React.ComponentType<any>;\n}\n\nexport function PlasmicRootProvider(props: PlasmicRootProviderProps) {\n  const {\n    platform,\n    children,\n    userAuthToken,\n    isUserLoading,\n    authRedirectUri,\n    user,\n  } = props;\n  const context = React.useMemo(\n    () => ({\n      platform,\n    }),\n    [platform]\n  );\n  const dataSourceContextValue = React.useMemo(\n    () => ({\n      userAuthToken,\n      user,\n      isUserLoading,\n      authRedirectUri,\n    }),\n    [userAuthToken, isUserLoading, user, authRedirectUri]\n  );\n  return (\n    <PlasmicRootContext.Provider value={context}>\n      <SSRProvider>\n        <PlasmicDataSourceContextProvider value={dataSourceContextValue}>\n          <PlasmicTranslatorContext.Provider value={props.translator}>\n            <PlasmicHeadContext.Provider value={props.Head}>\n              {children}\n            </PlasmicHeadContext.Provider>\n          </PlasmicTranslatorContext.Provider>\n        </PlasmicDataSourceContextProvider>\n      </SSRProvider>\n    </PlasmicRootContext.Provider>\n  );\n}\n\nexport const useIsSSR = useAriaIsSSR;\n\nexport function useHasPlasmicRoot() {\n  return !!React.useContext(PlasmicRootContext);\n}\n\nlet hasWarnedSSR = false;\n/**\n * Warns the user if PlasmicRootProvider is not used\n */\nexport function useEnsureSSRProvider() {\n  const hasRoot = useHasPlasmicRoot();\n  if (hasRoot || hasWarnedSSR || process.env.NODE_ENV !== \"development\") {\n    return;\n  }\n\n  hasWarnedSSR = true;\n  console.warn(\n    `Plasmic: To ensure your components work correctly with server-side rendering, please use PlasmicRootProvider at the root of your application.  See https://docs.plasmic.app/learn/ssr`\n  );\n}\n","import * as React from \"react\";\nimport { useFocusRing as useAriaFocusRing } from \"@react-aria/focus\";\n\nfunction useFocused(opts: { isTextInput?: boolean }) {\n  const { isFocused, focusProps } = useAriaFocusRing({\n    within: false,\n    isTextInput: opts.isTextInput,\n  });\n\n  return [isFocused, focusProps];\n}\n\nfunction useFocusVisible(opts: { isTextInput?: boolean }) {\n  const { isFocusVisible, focusProps } = useAriaFocusRing({\n    within: false,\n    isTextInput: opts.isTextInput,\n  });\n\n  return [isFocusVisible, focusProps];\n}\n\nfunction useFocusedWithin(opts: { isTextInput?: boolean }) {\n  const { isFocused, focusProps } = useAriaFocusRing({\n    within: true,\n    isTextInput: opts.isTextInput,\n  });\n\n  return [isFocused, focusProps];\n}\n\nfunction useFocusVisibleWithin(opts: { isTextInput?: boolean }) {\n  const { isFocusVisible, focusProps } = useAriaFocusRing({\n    within: true,\n    isTextInput: opts.isTextInput,\n  });\n\n  return [isFocusVisible, focusProps];\n}\n\nfunction useHover() {\n  const [isHover, setHover] = React.useState(false);\n  return [\n    isHover,\n    {\n      onMouseEnter: () => setHover(true),\n      onMouseLeave: () => setHover(false),\n    },\n  ];\n}\n\nfunction usePressed() {\n  const [isPressed, setPressed] = React.useState(false);\n  return [\n    isPressed,\n    {\n      onMouseDown: () => setPressed(true),\n      onMouseUp: () => setPressed(false),\n    },\n  ];\n}\n\nconst TRIGGER_TO_HOOK = {\n  useHover,\n  useFocused,\n  useFocusVisible,\n  useFocusedWithin,\n  useFocusVisibleWithin,\n  usePressed,\n} as const;\n\ntype TriggerType = keyof typeof TRIGGER_TO_HOOK;\n\ninterface TriggerOpts {\n  isTextInput?: boolean;\n}\n\n/**\n * Installs argment trigger. All the useTrigger calls must use hardcoded `trigger` arg,\n * as it's not valid to install variable React hooks!\n */\nexport function useTrigger(trigger: TriggerType, opts: TriggerOpts) {\n  return TRIGGER_TO_HOOK[trigger](opts) as [\n    boolean,\n    React.HTMLAttributes<HTMLElement>\n  ];\n}\n","import { StateSpecNode } from \"./graph\";\n\nexport type InitFuncEnv = {\n  $props: Record<string, any>;\n  $state: Record<string, any>;\n  $queries?: Record<string, any>;\n  $ctx?: Record<string, any>;\n};\n\nexport type DollarStateEnv = Omit<InitFuncEnv, \"$state\">;\n\nexport type NoUndefinedField<T> = { [P in keyof T]-?: T[P] };\n\nexport type InitFunc<T> = (env: NoUndefinedField<InitFuncEnv>) => T;\n\nexport type DeprecatedInitFunc<T> = (\n  $props: Record<string, any>,\n  $state: $State,\n  $ctx: Record<string, any>\n) => T;\n\nexport type ObjectPath = (string | number)[];\n\nexport interface $StateSpec<T> {\n  // path of the state, like `count` or `list.selectedIndex`\n  path: string;\n  // if initial value is defined by a js expression\n  initFunc?: InitFunc<T>;\n  // if initial value is a hard-coded value\n  initVal?: T;\n  // Whether this state is private, readonly, or writable in\n  // this component\n  type: \"private\" | \"readonly\" | \"writable\";\n\n  // If writable, there should be a valueProp that maps props[valueProp]\n  // to the value of the state\n  valueProp?: string;\n\n  // If writable or readonly, there should be an onChangeProp where\n  // props[onChangeProp] is invoked whenever the value changes\n  onChangeProp?: string;\n\n  isImmutable?: boolean;\n\n  variableType: \"text\" | \"number\" | \"boolean\" | \"array\" | \"object\" | \"variant\";\n\n  // Hash used to re-create the state\n  // This is only used in canvas where the state specs are dynamic\n  initFuncHash?: string;\n}\n\nexport interface $State {\n  [key: string]: any;\n  registerInitFunc?: (\n    path: string,\n    f: InitFunc<any>,\n    repetitonIndex?: number[],\n    overrideEnv?: DollarStateEnv\n  ) => any;\n}\n\nexport const ARRAY_SYMBOL = Symbol(\"[]\");\nexport const PLASMIC_STATE_PROXY_SYMBOL = Symbol(\"plasmic.state.proxy\");\nexport const UNINITIALIZED = Symbol(\"plasmic.unitialized\");\n\nexport interface Internal$StateSpec<T> extends $StateSpec<T> {\n  isRepeated: boolean;\n  pathObj: (string | symbol)[];\n}\n\nexport interface Internal$StateInstance {\n  path: ObjectPath; // [\"counter\", 0, \"count\"]\n  specKey: string;\n}\n\nexport interface StateCell<T> {\n  initialValue?: T | Symbol;\n  node: StateSpecNode<any>;\n  path: ObjectPath;\n  initFunc?: InitFunc<T>;\n  listeners: (() => void)[];\n  initFuncHash: string;\n  overrideEnv?: NoUndefinedField<DollarStateEnv>;\n}\n\nexport interface Internal$State {\n  registrationsQueue: {\n    node: StateSpecNode<any>;\n    path: ObjectPath;\n    f: InitFunc<any>;\n    overrideEnv?: NoUndefinedField<DollarStateEnv>;\n  }[];\n  stateValues: Record<string, any>;\n  env: NoUndefinedField<DollarStateEnv>;\n  rootSpecTree: StateSpecNode<any>;\n  specTreeLeaves: StateSpecNode<any>[];\n  specs: $StateSpec<any>[];\n  stateInitializationEnv: {\n    stack: string[];\n    visited: Set<string>;\n  };\n}\n","export class CustomError extends Error {\n  name: string;\n  constructor(msg?: string) {\n    super(msg);\n    this.name = this.constructor.name;\n    ({ message: this.message, stack: this.stack } = this);\n  }\n}\n\nexport class CyclicStatesReferencesError extends Error {\n  constructor(stateAccessCycle: string[]) {\n    super(\n      \"Cyclic reference found in state initialization: \" +\n        stateAccessCycle.join(\" -> \")\n    );\n  }\n}\n\nexport class InvalidOperation extends Error {\n  constructor(msg: string) {\n    super(msg);\n  }\n}\n\nexport class UnknownError extends Error {\n  constructor(msg: string) {\n    super(msg);\n  }\n}\n","import { isNum, shallowEqual } from \"./helpers\";\nimport {\n  $StateSpec,\n  ARRAY_SYMBOL,\n  Internal$StateSpec,\n  ObjectPath,\n} from \"./types\";\n\nexport class StateSpecNode<T> {\n  private _specs: Internal$StateSpec<T>[];\n  private _edges: Map<string | symbol, StateSpecNode<any>>;\n\n  constructor(specs: Internal$StateSpec<T>[]) {\n    this._specs = specs;\n    this._edges = new Map();\n  }\n\n  setSpecs(specs: Internal$StateSpec<T>[]) {\n    this._specs = specs;\n  }\n\n  edges() {\n    return this._edges;\n  }\n\n  hasEdge(key: string | symbol) {\n    return this._edges.has(key);\n  }\n\n  addEdge(key: string | symbol, node: StateSpecNode<any>) {\n    this._edges.set(key, node);\n  }\n\n  clearEdges() {\n    this._edges = new Map();\n  }\n\n  children() {\n    return this._edges.values();\n  }\n\n  makeTransition(key: string | symbol | number) {\n    key = isNum(key) ? ARRAY_SYMBOL : key;\n    return this._edges.get(key);\n  }\n\n  isLeaf() {\n    return this._edges.size === 0 && this.getAllSpecs().length > 0;\n  }\n\n  hasArrayTransition() {\n    return this._edges.has(ARRAY_SYMBOL);\n  }\n\n  getSpec() {\n    return this._specs[0];\n  }\n\n  getAllSpecs() {\n    return this._specs;\n  }\n}\n\nexport const transformPathStringToObj = (str: string) => {\n  const splitStatePathPart = (state: string): (string | symbol)[] =>\n    state.endsWith(\"[]\")\n      ? [...splitStatePathPart(state.slice(0, -2)), ARRAY_SYMBOL]\n      : [state];\n  return str.split(\".\").flatMap(splitStatePathPart);\n};\n\nexport function buildTree(specs: $StateSpec<any>[]) {\n  const internalSpec = specs.map(\n    (spec) =>\n      ({\n        ...spec,\n        pathObj: transformPathStringToObj(spec.path),\n        isRepeated: spec.path.split(\".\").some((part) => part.endsWith(\"[]\")),\n      } as Internal$StateSpec<any>)\n  );\n\n  const rec = (currentPath: (string | symbol)[]): StateSpecNode<any> => {\n    const node = new StateSpecNode(\n      internalSpec.filter((spec) =>\n        shallowEqual(currentPath, spec.pathObj.slice(0, currentPath.length))\n      )!\n    );\n    node.getAllSpecs().forEach((spec) => {\n      if (spec.pathObj.length > currentPath.length) {\n        const nextKey = spec.pathObj[currentPath.length];\n        if (!node.hasEdge(nextKey)) {\n          node.addEdge(nextKey, rec([...currentPath, nextKey]));\n        }\n      }\n    });\n    return node;\n  };\n\n  return rec([]);\n}\n\nexport function updateTree(root: StateSpecNode<any>, specs: $StateSpec<any>[]) {\n  const internalSpec = specs.map(\n    (spec) =>\n      ({\n        ...spec,\n        pathObj: transformPathStringToObj(spec.path),\n        isRepeated: spec.path.split(\".\").some((part) => part.endsWith(\"[]\")),\n      } as Internal$StateSpec<any>)\n  );\n\n  const rec = (\n    oldNode: StateSpecNode<any> | undefined,\n    currentPath: (string | symbol)[]\n  ): StateSpecNode<any> => {\n    const nodeSpecs = internalSpec.filter((spec) =>\n      shallowEqual(currentPath, spec.pathObj.slice(0, currentPath.length))\n    )!;\n    const node = oldNode ?? new StateSpecNode(nodeSpecs);\n    node.setSpecs(nodeSpecs);\n    const oldEdges = oldNode?.edges();\n    node.clearEdges();\n    node.getAllSpecs().forEach((spec) => {\n      if (spec.pathObj.length > currentPath.length) {\n        const nextKey = spec.pathObj[currentPath.length];\n        if (!node.hasEdge(nextKey)) {\n          node.addEdge(\n            nextKey,\n            rec(oldEdges?.get(nextKey), [...currentPath, nextKey])\n          );\n        }\n      }\n    });\n    return node;\n  };\n\n  return rec(root, []);\n}\n\nexport function getSpecTreeLeaves(root: StateSpecNode<any>) {\n  const leaves: StateSpecNode<any>[] = [];\n  const rec = (node: StateSpecNode<any>) => {\n    for (const child of node.children()) {\n      rec(child);\n    }\n    if (node.isLeaf() && node.getAllSpecs().length > 0) {\n      leaves.push(node);\n    }\n  };\n  rec(root);\n  return leaves;\n}\n\nexport function findStateCell(\n  root: StateSpecNode<any>,\n  pathStr: string,\n  repetitionIndex?: number[]\n) {\n  const realPath: ObjectPath = [];\n  const pathObj = transformPathStringToObj(pathStr);\n  let currRepIndex = 0;\n  for (const part of pathObj) {\n    if (typeof part === \"symbol\") {\n      if (\n        !root.hasArrayTransition() ||\n        !repetitionIndex ||\n        currRepIndex > repetitionIndex.length\n      ) {\n        throw new Error(\n          `transition not found: pathStr ${pathStr} part ${\n            typeof part === \"symbol\" ? \"[]\" : part\n          }`\n        );\n      }\n      realPath.push(repetitionIndex[currRepIndex++]);\n      root = root.makeTransition(ARRAY_SYMBOL)!;\n    } else {\n      if (!root.hasEdge(part)) {\n        throw new Error(\n          `transition not found: pathStr ${pathStr} part ${\n            typeof part === \"symbol\" ? \"[]\" : part\n          }`\n        );\n      }\n      realPath.push(part);\n      root = root.makeTransition(part)!;\n    }\n  }\n  return {\n    node: root,\n    realPath,\n  };\n}\n","import clone from \"clone\";\nimport get from \"dlv\";\nimport deepEqual from \"fast-deep-equal\";\nimport React from \"react\";\nimport {\n  getVersion as isValtioProxy,\n  proxy as createValtioProxy,\n  ref,\n  subscribe,\n  useSnapshot,\n} from \"valtio\";\nimport { ensure } from \"../common\";\nimport {\n  CyclicStatesReferencesError,\n  InvalidOperation,\n  UnknownError,\n} from \"./errors\";\nimport {\n  buildTree,\n  findStateCell,\n  getSpecTreeLeaves,\n  StateSpecNode,\n  updateTree,\n} from \"./graph\";\nimport {\n  arrayEq,\n  getStateCells,\n  set,\n  useIsomorphicLayoutEffect,\n} from \"./helpers\";\nimport {\n  $State,\n  $StateSpec,\n  DeprecatedInitFunc,\n  DollarStateEnv,\n  InitFunc,\n  InitFuncEnv,\n  Internal$State,\n  NoUndefinedField,\n  ObjectPath,\n  PLASMIC_STATE_PROXY_SYMBOL,\n  StateCell,\n  UNINITIALIZED,\n} from \"./types\";\n\nfunction isNum(value: string | number | symbol): value is number {\n  return typeof value === \"symbol\" ? false : !isNaN(+value);\n}\n\nfunction canProxy(value: any) {\n  return typeof value === \"object\" && value != null;\n}\n\nexport const proxyObjToStateCell = new WeakMap<\n  object,\n  Record<string | number | symbol, StateCell<any>>\n>();\nexport const valtioSubscriptions = new WeakMap<\n  object,\n  ReturnType<typeof subscribe>[]\n>();\n\nfunction ensureStateCell(\n  target: any,\n  property: string | number | symbol,\n  path: ObjectPath,\n  node: StateSpecNode<any>\n) {\n  if (!proxyObjToStateCell.has(target)) {\n    proxyObjToStateCell.set(target, {});\n  }\n  const stateCell = proxyObjToStateCell.get(target)!;\n  if (!(property in stateCell)) {\n    stateCell[property as any] = {\n      listeners: [],\n      initialValue: UNINITIALIZED,\n      path,\n      node,\n      initFunc: node.getSpec().initFunc,\n      initFuncHash: node.getSpec().initFuncHash ?? \"\",\n    };\n  }\n  return stateCell[property as any];\n}\n\nfunction getStateCell(target: any, property: string | number | symbol) {\n  return proxyObjToStateCell.get(target)?.[property as any];\n}\n\nexport function tryGetStateCellFrom$StateRoot(\n  $state: $State,\n  path: ObjectPath\n) {\n  if (path.length === 0) {\n    throw new UnknownError(\"expected a path with length greater than 0\");\n  }\n  const target = get($state, path.slice(0, -1));\n  get(target, path.slice(-1)); // create state cell;\n  return getStateCell(target, path.slice(-1)[0]);\n}\n\nexport function getStateCellFrom$StateRoot($state: $State, path: ObjectPath) {\n  return ensure(tryGetStateCellFrom$StateRoot($state, path));\n}\n\nexport function unsubscribeToValtio(\n  $$state: Internal$State,\n  statePath: ObjectPath\n) {\n  const oldValue = get($$state.stateValues, statePath);\n  if (isValtioProxy(oldValue)) {\n    valtioSubscriptions.get(oldValue)?.forEach((f) => f());\n    valtioSubscriptions.delete(oldValue);\n  }\n}\n\nexport function subscribeToValtio(\n  $$state: Internal$State,\n  statePath: ObjectPath,\n  node: StateSpecNode<any>\n) {\n  const spec = node.getSpec();\n  const maybeValtioProxy = spec.valueProp\n    ? $$state.env.$props[spec.valueProp]\n    : get($$state.stateValues, statePath);\n  if (isValtioProxy(maybeValtioProxy) && spec.onChangeProp) {\n    const unsub = subscribe(maybeValtioProxy, () => {\n      $$state.env.$props[spec.onChangeProp!]?.(\n        spec.valueProp\n          ? $$state.env.$props[spec.valueProp]\n          : get($$state.stateValues, statePath)\n      );\n    });\n    if (!valtioSubscriptions.has(maybeValtioProxy)) {\n      valtioSubscriptions.set(maybeValtioProxy, []);\n    }\n    ensure(valtioSubscriptions.get(maybeValtioProxy)).push(unsub);\n  }\n}\n\nfunction initializeStateValue(\n  $$state: Internal$State,\n  initialStateCell: StateCell<any>,\n  proxyRoot: any\n) {\n  const initialStateName = initialStateCell.node.getSpec().path;\n  const stateAccess: Set<{\n    stateCell: StateCell<any>;\n  }> = new Set();\n  $$state.stateInitializationEnv.visited.add(initialStateName);\n  $$state.stateInitializationEnv.stack.push(initialStateName);\n  const $state = create$StateProxy($$state, (internalStateCell) => ({\n    get() {\n      const spec = internalStateCell.node.getSpec();\n      if ($$state.stateInitializationEnv.visited.has(spec.path)) {\n        // cyclic reference found\n        const stateAccessCycle: string[] = [spec.path];\n        while ($$state.stateInitializationEnv.stack.length > 0) {\n          const curr = $$state.stateInitializationEnv.stack.pop();\n          if (!curr) {\n            break;\n          }\n          stateAccessCycle.push(curr);\n          if (curr === spec.path) {\n            throw new CyclicStatesReferencesError(stateAccessCycle);\n          }\n        }\n        throw new UnknownError(\"Internal error: cycle not found\");\n      }\n\n      const stateCell = getStateCellFrom$StateRoot(\n        proxyRoot,\n        internalStateCell.path\n      );\n      stateAccess.add({ stateCell });\n      if (spec.valueProp) {\n        return $$state.env.$props[spec.valueProp];\n      } else if (spec.initFunc && stateCell.initialValue === UNINITIALIZED) {\n        return initializeStateValue($$state, stateCell, proxyRoot);\n      }\n      return get(proxyRoot, stateCell.path);\n    },\n    set() {\n      throw new InvalidOperation(\n        `Cannot update state values during initialization`\n      );\n    },\n  }));\n\n  stateAccess.forEach(({ stateCell }) => {\n    stateCell.listeners.push(() => {\n      const newValue = invokeInitFuncBackwardsCompatible(\n        initialStateCell.node.getSpec().initFunc!,\n        {\n          $state,\n          ...(initialStateCell.overrideEnv ?? $$state.env),\n        }\n      );\n      set(proxyRoot, initialStateCell.path, newValue);\n    });\n  });\n\n  const initialValue = invokeInitFuncBackwardsCompatible(\n    initialStateCell.initFunc!,\n    {\n      $state,\n      ...(initialStateCell.overrideEnv ?? $$state.env),\n    }\n  );\n  initialStateCell.initialValue = clone(initialValue);\n\n  const initialSpec = initialStateCell.node.getSpec();\n  const value = initialSpec.isImmutable\n    ? mkUntrackedValue(initialValue)\n    : clone(initialValue);\n  set(proxyRoot, initialStateCell.path, value);\n  //immediately fire onChange\n  if (initialSpec.onChangeProp) {\n    $$state.env.$props[initialSpec.onChangeProp]?.(initialValue);\n  }\n  $$state.stateInitializationEnv.visited.delete(initialStateName);\n  $$state.stateInitializationEnv.stack.pop();\n  return initialValue;\n}\n\nfunction create$StateProxy(\n  $$state: Internal$State,\n  leafHandlers: (stateCell: StateCell<any>) => ProxyHandler<any>\n) {\n  let proxyRoot: any;\n  const rec = (currPath: ObjectPath, currNode: StateSpecNode<any>) => {\n    const getNextPath = (property: string | number | symbol) => [\n      ...currPath,\n      isNum(property) ? +property : (property as string),\n    ];\n    const spec = currNode.getSpec();\n    const handlers: ProxyHandler<any> = {\n      deleteProperty(target, property) {\n        if (\n          !currNode.isLeaf() &&\n          !currNode.hasArrayTransition() &&\n          !isNum(property)\n        ) {\n          throw new InvalidOperation(\n            \"Can't delete a property in the middle of the state spec\"\n          );\n        }\n        delete get($$state.stateValues, currPath)[property];\n        if (spec.onChangeProp) {\n          //we are always in a leaf, since we only have two cases:\n          // 1 - delete properties outside the state tree\n          // 2 - delete indices in repeated implicit states, but these can't be exposed, so they don't have onChangeProp\n          $$state.env.$props[spec.onChangeProp]?.(\n            get(proxyRoot, currPath.slice(spec.pathObj.length))\n          );\n        }\n        return Reflect.deleteProperty(target, property);\n      },\n      get(target, property, receiver) {\n        if (property === PLASMIC_STATE_PROXY_SYMBOL) {\n          return {\n            node: currNode,\n            path: currPath,\n          };\n        }\n        const nextPath = getNextPath(property);\n\n        const nextNode = currNode.makeTransition(property);\n        if (nextNode?.isLeaf()) {\n          return leafHandlers(\n            ensureStateCell(receiver, property, nextPath, nextNode)\n          ).get?.(target, property, receiver);\n        } else if (nextNode && !(property in target)) {\n          target[property] = rec(nextPath, nextNode);\n        }\n        return Reflect.get(target, property, receiver);\n      },\n      set(target, property, value, receiver) {\n        const nextPath = getNextPath(property);\n        let nextNode = currNode.makeTransition(property);\n        const nextSpec = nextNode?.getSpec();\n\n        if (property === \"registerInitFunc\" && currPath.length === 0) {\n          return Reflect.set(target, property, value, receiver);\n        }\n        if (!nextNode && currNode.hasArrayTransition()) {\n          set($$state.stateValues, nextPath, value);\n          //array can set his own properties such as length, map, ...\n          return Reflect.set(target, property, value, receiver);\n        }\n        if (nextNode?.isLeaf()) {\n          leafHandlers(\n            ensureStateCell(receiver, property, nextPath, nextNode)\n          ).set?.(target, property, value, receiver);\n          Reflect.set(target, property, value, receiver);\n          if (nextSpec?.onChangeProp) {\n            $$state.env.$props[nextSpec.onChangeProp]?.(value);\n          }\n        }\n        if (!nextNode) {\n          // can't set an unknown field in $state\n          return false;\n        }\n        if (canProxy(value) && !nextNode.isLeaf()) {\n          target[property] = rec(nextPath, nextNode);\n          Reflect.ownKeys(value).forEach((key) => {\n            target[property][key] = value[key];\n          });\n        } else if (!nextNode.isLeaf()) {\n          throw new InvalidOperation(\n            \"inserting a primitive value into a non-leaf\"\n          );\n        }\n        const newValue =\n          nextNode.isLeaf() && nextSpec?.isImmutable\n            ? mkUntrackedValue(value)\n            : value;\n\n        unsubscribeToValtio($$state, nextPath);\n        set($$state.stateValues, nextPath, newValue);\n        subscribeToValtio($$state, nextPath, nextNode);\n        return true;\n      },\n    };\n    const baseObject = currNode.hasArrayTransition() ? [] : {};\n    const proxyObj = new Proxy(baseObject, handlers);\n    if (currPath.length === 0) {\n      proxyRoot = proxyObj;\n    }\n    return proxyObj;\n  };\n\n  return rec([], $$state.rootSpecTree);\n}\n\nconst mkUntrackedValue = (o: any) =>\n  o != null && typeof o === \"object\" ? ref(o) : o;\n\nconst envFieldsAreNonNill = (\n  env: DollarStateEnv\n): NoUndefinedField<DollarStateEnv> => ({\n  $props: env.$props,\n  $ctx: env.$ctx ?? {},\n  $queries: env.$queries ?? {},\n});\n\n/**\n * We need to support two versions with different parameters to be backward compatible\n *    {\n *       specs: $StateSpec<any>[],\n *       props: Record<string, any>,\n *       $ctx?: Record<string, any>,\n *       opts?: { inCanvas: boolean; }\n *    }\n *    {\n *       specs: $StateSpec<any>[],\n *       env: { $props; $queries; $ctx },\n *       opts?: { inCanvas: boolean }\n *    }\n */\nfunction extractDollarStateParametersBackwardCompatible(\n  ...rest: any[]\n): {\n  env: DollarStateEnv;\n  opts?: { inCanvas: boolean };\n} {\n  if (\"$props\" in rest[0]) {\n    // latest version\n    return {\n      env: rest[0],\n      opts: rest[1],\n    };\n  } else {\n    return {\n      env: {\n        $props: rest[0],\n        $ctx: rest[1],\n        $queries: {},\n      },\n      opts: rest[2],\n    };\n  }\n}\n\nfunction invokeInitFuncBackwardsCompatible<T>(\n  initFunc: InitFunc<T> | DeprecatedInitFunc<T>,\n  env: NoUndefinedField<InitFuncEnv>\n) {\n  if (initFunc.length > 1) {\n    return (initFunc as DeprecatedInitFunc<T>)(\n      env.$props,\n      env.$state,\n      env.$ctx\n    );\n  } else {\n    return (initFunc as InitFunc<T>)(env);\n  }\n}\n\nexport function useDollarState(\n  specs: $StateSpec<any>[],\n  ...rest: any[]\n): $State {\n  const { env, opts } = extractDollarStateParametersBackwardCompatible(...rest);\n  const $$state = React.useRef<Internal$State>(\n    (() => {\n      const rootSpecTree = buildTree(specs);\n      return {\n        rootSpecTree: rootSpecTree,\n        specTreeLeaves: getSpecTreeLeaves(rootSpecTree),\n        stateValues: createValtioProxy({}),\n        env: envFieldsAreNonNill(env),\n        specs: [],\n        registrationsQueue: createValtioProxy([]),\n        stateInitializationEnv: { stack: [], visited: new Set<string>() },\n      };\n    })()\n  ).current;\n  $$state.env = envFieldsAreNonNill(env);\n  $$state.specs = specs;\n\n  const create$State = React.useCallback(() => {\n    const $state = Object.assign(\n      create$StateProxy($$state, (stateCell) => {\n        const spec = stateCell.node.getSpec();\n        if (stateCell.initialValue === UNINITIALIZED && spec.initFunc) {\n          initializeStateValue($$state, stateCell, $state);\n        } else if (\n          stateCell.initialValue === UNINITIALIZED &&\n          !spec.valueProp\n        ) {\n          stateCell.initialValue = spec.initVal;\n          set($state, stateCell.path, spec.initVal);\n        }\n        return {\n          get() {\n            const spec = stateCell.node.getSpec();\n            if (spec.valueProp) {\n              const valueProp = $$state.env.$props[spec.valueProp];\n              subscribeToValtio($$state, stateCell.path, stateCell.node);\n              return valueProp;\n            } else {\n              return get($$state.stateValues, stateCell.path);\n            }\n          },\n        };\n      }),\n      {\n        registerInitFunc: function <T>(\n          pathStr: string,\n          f: InitFunc<T>,\n          repetitionIndex?: number[],\n          overrideEnv?: DollarStateEnv\n        ) {\n          const { node, realPath } = findStateCell(\n            $$state.rootSpecTree,\n            pathStr,\n            repetitionIndex\n          );\n          const stateCell = getStateCellFrom$StateRoot($state, realPath);\n          const env = overrideEnv\n            ? envFieldsAreNonNill(overrideEnv)\n            : $$state.env;\n          if (!deepEqual(stateCell.initialValue, f({ $state, ...env }))) {\n            $$state.registrationsQueue.push(\n              mkUntrackedValue({\n                node,\n                path: realPath,\n                f,\n                overrideEnv: overrideEnv\n                  ? envFieldsAreNonNill(overrideEnv)\n                  : undefined,\n              })\n            );\n          }\n        },\n      }\n    );\n    return $state;\n  }, []);\n  const ref = React.useRef<undefined | $State>(undefined);\n  if (!ref.current) {\n    ref.current = create$State();\n  }\n  let $state = ref.current as $State;\n  if (opts?.inCanvas) {\n    $$state.rootSpecTree = updateTree($$state.rootSpecTree, specs);\n    const newLeaves = getSpecTreeLeaves($$state.rootSpecTree);\n    if (!arrayEq(newLeaves, $$state.specTreeLeaves)) {\n      const old$state = $state;\n      $state = ref.current = create$State();\n      $$state.specTreeLeaves = newLeaves;\n      getStateCells(old$state, $$state.rootSpecTree).forEach(({ path }) => {\n        const oldStateCell = tryGetStateCellFrom$StateRoot(old$state, path);\n        if (oldStateCell) {\n          set($state, path, get(old$state, path));\n          const newStateCell = getStateCellFrom$StateRoot($state, path);\n          newStateCell.initialValue = oldStateCell.initialValue;\n        }\n      });\n    }\n    // we need to eager initialize all states in canvas to populate the data picker\n    $$state.specTreeLeaves.forEach((node) => {\n      const spec = node.getSpec();\n      if (spec.isRepeated) {\n        return;\n      }\n      const stateCell = getStateCellFrom$StateRoot(\n        $state,\n        spec.pathObj as string[]\n      );\n      const newSpec = specs.find((sp) => sp.path === spec.path);\n      if (\n        !newSpec ||\n        (stateCell.initFuncHash === (newSpec?.initFuncHash ?? \"\") &&\n          stateCell.initialValue !== UNINITIALIZED)\n      ) {\n        return;\n      }\n      stateCell.initFunc = newSpec.initFunc;\n      stateCell.initFuncHash = newSpec.initFuncHash ?? \"\";\n      const init = spec.valueProp\n        ? $$state.env.$props[spec.valueProp]\n        : spec.initFunc\n        ? initializeStateValue($$state, stateCell, $state)\n        : spec.initVal;\n      set($state, spec.pathObj, init);\n    });\n  }\n\n  // For each spec with an initFunc, evaluate it and see if\n  // the init value has changed. If so, reset its state.\n  const resetSpecs: {\n    stateCell: StateCell<any>;\n  }[] = [];\n  getStateCells($state, $$state.rootSpecTree).forEach((stateCell) => {\n    if (stateCell.initFunc) {\n      const newInit = invokeInitFuncBackwardsCompatible(stateCell.initFunc, {\n        $state,\n        ...(stateCell.overrideEnv ?? envFieldsAreNonNill(env)),\n      });\n      if (!deepEqual(newInit, stateCell.initialValue)) {\n        resetSpecs.push({ stateCell });\n      }\n    }\n  });\n  const reInitializeState = (stateCell: StateCell<any>) => {\n    const newInit = initializeStateValue($$state, stateCell, $state);\n    const spec = stateCell.node.getSpec();\n    if (spec.onChangeProp) {\n      $$state.env.$props[spec.onChangeProp]?.(newInit);\n    }\n  };\n  useIsomorphicLayoutEffect(() => {\n    resetSpecs.forEach(({ stateCell }) => {\n      reInitializeState(stateCell);\n    });\n  }, [env.$props, resetSpecs]);\n  useIsomorphicLayoutEffect(() => {\n    while ($$state.registrationsQueue.length) {\n      const { path, f, overrideEnv } = $$state.registrationsQueue.shift()!;\n      const stateCell = getStateCellFrom$StateRoot($state, path);\n      stateCell.initFunc = f;\n      stateCell.overrideEnv = overrideEnv;\n      reInitializeState(stateCell);\n    }\n  }, [$$state.registrationsQueue.length]);\n  // immediately initialize exposed non-private states\n  useIsomorphicLayoutEffect(() => {\n    $$state.specTreeLeaves.forEach((node) => {\n      const spec = node.getSpec();\n      if (!spec.isRepeated && spec.type !== \"private\" && spec.initFunc) {\n        const stateCell = getStateCellFrom$StateRoot(\n          $state,\n          spec.pathObj as ObjectPath\n        );\n        initializeStateValue($$state, stateCell, $state);\n      }\n    });\n  }, []);\n\n  // Re-render if any value changed in one of these objects\n  useSnapshot($$state.stateValues, { sync: true });\n  useSnapshot($$state.registrationsQueue, { sync: true });\n  return $state;\n}\n\nexport default useDollarState;\n","import type { ComponentHelpers } from \"@plasmicapp/host\";\nimport get from \"dlv\";\nimport { useEffect, useLayoutEffect } from \"react\";\nimport { getVersion as isValtioProxy } from \"valtio\";\nimport { ensure } from \"../common\";\nimport { StateSpecNode } from \"./graph\";\nimport {\n  $State,\n  ARRAY_SYMBOL,\n  InitFunc,\n  ObjectPath,\n  PLASMIC_STATE_PROXY_SYMBOL,\n  StateCell,\n} from \"./types\";\nimport { proxyObjToStateCell, tryGetStateCellFrom$StateRoot } from \"./valtio\";\n\nexport function initializeCodeComponentStates(\n  $state: $State,\n  states: {\n    name: string;\n    plasmicStateName: string;\n  }[],\n  repetitionIndex: number[],\n  componentHelpers: ComponentHelpers<any>,\n  child$Props: Record<string, any>\n) {\n  const stateHelpers = componentHelpers?.states ?? {};\n  for (const { name, plasmicStateName } of states) {\n    if (name in stateHelpers && \"initFunc\" in stateHelpers[name]) {\n      $state.registerInitFunc?.(\n        plasmicStateName,\n        ({ $props }) => stateHelpers[name].initFunc?.($props),\n        repetitionIndex ?? [],\n        { $props: child$Props }\n      );\n    }\n  }\n}\n\nexport function initializePlasmicStates(\n  $state: $State,\n  states: {\n    name: string;\n    initFunc: InitFunc<any>;\n  }[],\n  repetitionIndex: number[]\n) {\n  for (const { name, initFunc } of states) {\n    $state.registerInitFunc?.(name, initFunc, repetitionIndex ?? []);\n  }\n}\n\nexport function generateStateOnChangeProp(\n  $state: $State,\n  path: ObjectPath\n): (val: any) => void {\n  return (val) => set($state, path, val);\n}\n\nexport function generateStateOnChangePropForCodeComponents(\n  $state: $State,\n  stateName: string,\n  plasmicStatePath: ObjectPath,\n  componentHelpers: ComponentHelpers<any>\n): (val: any) => void {\n  const onChangeArgsToValue =\n    componentHelpers?.states?.[stateName]?.onChangeArgsToValue;\n  if (!onChangeArgsToValue || typeof onChangeArgsToValue !== \"function\") {\n    return generateStateOnChangeProp($state, plasmicStatePath);\n  }\n  return (...args) =>\n    generateStateOnChangeProp(\n      $state,\n      plasmicStatePath\n    )(onChangeArgsToValue.apply(null, args));\n}\n\nexport function generateStateValueProp($state: $State, path: ObjectPath) {\n  return get($state, path);\n}\n\nexport const useIsomorphicLayoutEffect =\n  typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\nexport function isPlasmicStateProxy(obj: any) {\n  return (\n    obj != null && typeof obj === \"object\" && !!obj[PLASMIC_STATE_PROXY_SYMBOL]\n  );\n}\n\nexport function is$StateProxy(obj: any) {\n  return (\n    obj != null &&\n    typeof obj === \"object\" &&\n    (!!obj[PLASMIC_STATE_PROXY_SYMBOL] || isValtioProxy(obj))\n  );\n}\n\nexport function getStateCells(\n  $state: $State,\n  root: StateSpecNode<any>\n): StateCell<any>[] {\n  if ($state == null || typeof $state !== \"object\") {\n    return [];\n  }\n\n  if (root.hasArrayTransition()) {\n    return Object.keys($state).flatMap((key) =>\n      getStateCells($state[key], ensure(root.makeTransition(ARRAY_SYMBOL)))\n    );\n  } else {\n    const stateCell = proxyObjToStateCell.get($state) ?? {};\n    const stateCells: StateCell<any>[] = [];\n    for (const [key, child] of root.edges().entries()) {\n      if (typeof key === \"string\" && key in $state) {\n        stateCells.push(...getStateCells($state[key], child));\n        if (key in stateCell) {\n          stateCells.push(stateCell[key]);\n        }\n      }\n    }\n    return stateCells;\n  }\n}\n\nexport function getStateCellsInPlasmicProxy(\n  obj: any\n): { realPath: ObjectPath; path: string }[] {\n  if (!isPlasmicStateProxy(obj)) {\n    return [];\n  }\n  const { node: rootNode, path: rootPath, isOutside } = obj[\n    PLASMIC_STATE_PROXY_SYMBOL\n  ];\n  if (isOutside) {\n    return [];\n  }\n  return getStateCells(obj, rootNode).map((stateCell) => ({\n    path: stateCell.node.getSpec().path,\n    realPath: stateCell.path.slice(rootPath.length),\n  }));\n}\n\nexport function getStateSpecInPlasmicProxy(obj: any, path: ObjectPath) {\n  obj = get(obj, path.slice(0, path.length - 1));\n  if (!isPlasmicStateProxy(obj)) {\n    return undefined;\n  }\n  const { node } = obj[PLASMIC_STATE_PROXY_SYMBOL] as {\n    node: StateSpecNode<any>;\n  };\n  const nextNode = node.makeTransition(path[path.length - 1]);\n  if (node.isLeaf() || !nextNode) {\n    return undefined;\n  }\n  return {\n    spec: nextNode.getSpec(),\n    isImplicitStateArray: nextNode.hasArrayTransition(),\n  };\n}\n\nexport function getCurrentInitialValue(obj: any, path: ObjectPath) {\n  if (!isPlasmicStateProxy(obj)) {\n    return undefined;\n  }\n  return tryGetStateCellFrom$StateRoot(obj, path)?.initialValue;\n}\n\nexport function resetToInitialValue(obj: any, path: ObjectPath) {\n  const stateCell = tryGetStateCellFrom$StateRoot(obj, path);\n  if (stateCell) {\n    set(obj, path, stateCell.initialValue);\n  }\n}\n\nexport function shallowEqual<T>(a1: T[], a2: T[]) {\n  if (a1.length !== a2.length) {\n    return false;\n  }\n  for (let i = 0; i < a1.length; i++) {\n    if (a1[i] !== a2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Shallow comparison of arrays.\n */\nexport function arrayEq(xs: ReadonlyArray<any>, ys: ReadonlyArray<any>) {\n  return (\n    xs.length === ys.length && xs.every((_, index) => xs[index] === ys[index])\n  );\n}\n\nexport function isNum(value: string | number | symbol): value is number {\n  return typeof value === \"symbol\" ? false : !isNaN(+value);\n}\n\ntype StringGen = string | (() => string);\nexport function assert<T>(\n  cond: T,\n  msg: StringGen = \"Assertion failed\"\n): asserts cond {\n  if (!cond) {\n    // We always generate an non empty message so that it doesn't get swallowed\n    // by the async library.\n    msg = (typeof msg === \"string\" ? msg : msg()) || \"Assertion failed\";\n    debugger;\n    throw new Error(msg);\n  }\n}\n\n/**\n * Forked from https://github.com/lukeed/dset\n * Changes: fixed setting a deep value to a proxy object\n */\nexport function set(obj: any, keys: any, val: any) {\n  keys = keys.split ? keys.split(\".\") : keys;\n  var i = 0,\n    l = keys.length,\n    t = obj,\n    x,\n    k;\n  while (i < l) {\n    k = keys[i++];\n    if (k === \"__proto__\" || k === \"constructor\" || k === \"prototype\") break;\n    const newValue =\n      i === l\n        ? val\n        : typeof (x = t[k]) === typeof keys\n        ? x\n        : keys[i] * 0 !== 0 || !!~(\"\" + keys[i]).indexOf(\".\")\n        ? {}\n        : [];\n    assignValue(t, k, newValue);\n    t = t[k];\n  }\n}\n\n/**\n * Forked from lodash\n */\nfunction baseAssignValue(object: any, key: any, value: any) {\n  if (key == \"__proto__\") {\n    Object.defineProperty(object, key, {\n      configurable: true,\n      enumerable: true,\n      value: value,\n      writable: true,\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nfunction eq(value: any, other: any) {\n  return value === other || (value !== value && other !== other);\n}\n\nfunction assignValue(object: any, key: any, value: any) {\n  const objValue = object[key];\n  if (\n    !(\n      Object.prototype.hasOwnProperty.call(object, key) && eq(objValue, value)\n    ) ||\n    (value === undefined && !(key in object))\n  ) {\n    baseAssignValue(object, key, value);\n  }\n}\n","// Utilities used by generated code\nimport _classNames from \"classnames\";\nexport {\n  PlasmicPageGuard,\n  withPlasmicPageGuard,\n} from \"./auth/PlasmicPageGuard\";\nexport { omit, pick } from \"./common\";\nexport { HTMLElementRefOf, StrictProps } from \"./react-utils\";\nexport {\n  createPlasmicElementProxy,\n  deriveRenderOpts,\n  Flex,\n  hasVariant,\n  makeFragment,\n  mergeVariantsWithStates,\n  MultiChoiceArg,\n  SingleBooleanChoiceArg,\n  SingleChoiceArg,\n  wrapWithClassName,\n} from \"./render/elements\";\nexport { ensureGlobalVariants } from \"./render/global-variants\";\nexport { PlasmicHead, plasmicHeadMeta } from \"./render/PlasmicHead\";\nexport { PlasmicIcon } from \"./render/PlasmicIcon\";\nexport { PlasmicImg } from \"./render/PlasmicImg\";\nexport { PlasmicLink } from \"./render/PlasmicLink\";\nexport { PlasmicSlot, renderPlasmicSlot } from \"./render/PlasmicSlot\";\nexport { createUseScreenVariants } from \"./render/screen-variants\";\nexport {\n  PlasmicDataSourceContextProvider,\n  PlasmicRootProvider,\n  useCurrentUser,\n  useIsSSR,\n} from \"./render/ssr\";\nexport { Stack } from \"./render/Stack\";\nexport { genTranslatableString, Trans } from \"./render/translation\";\nexport { useTrigger } from \"./render/triggers\";\nexport * from \"./states\";\nexport const classNames = _classNames;\n","import * as React from \"react\";\nimport { groupBy, mapValues } from \"../common\";\nimport { SingleChoiceArg } from \"../render/elements\";\n\nexport let PLUME_STRICT_MODE = true;\n\nexport function setPlumeStrictMode(mode: boolean) {\n  PLUME_STRICT_MODE = mode;\n}\n\ntype VariantArgChoices<T> = T extends (infer M)[]\n  ? M\n  : T extends SingleChoiceArg<infer M>\n  ? M\n  : never;\ntype VariantArgsChoices<V> = { [k in keyof V]-?: VariantArgChoices<V[k]> };\ntype DictValues<V extends Record<string, any>> = V[keyof V];\ntype DictTuples<V extends Record<string, any>> = DictValues<\n  { [K in keyof V]: [K, V[K]] }\n>;\nexport type VariantDefTuple<V> = DictTuples<VariantArgsChoices<V>>;\n\ntype DistributeTuple<T> = T extends [infer T1, infer T2]\n  ? { group: T1; variant: T2 }\n  : never;\n\nexport type VariantDef<V> = DistributeTuple<VariantDefTuple<V>>;\n\nexport type PlasmicClass<\n  V extends Record<string, any>,\n  A extends Record<string, any>,\n  O extends Record<string, any>\n> = {\n  (props: { variants?: V; args?: A; overrides?: O }): React.ReactElement | null;\n  internalVariantProps: (keyof V)[];\n  internalArgProps: (keyof A)[];\n};\n\nexport type AnyPlasmicClass = PlasmicClass<any, any, any>;\n\nexport type PlasmicClassVariants<\n  C extends AnyPlasmicClass\n> = C extends PlasmicClass<infer V, any, any> ? V : unknown;\nexport type PlasmicClassArgs<\n  C extends AnyPlasmicClass\n> = C extends PlasmicClass<any, infer A, any> ? A : unknown;\nexport type PlasmicClassOverrides<\n  C extends AnyPlasmicClass\n> = C extends PlasmicClass<any, any, infer O> ? O : unknown;\n\ntype BooleanLike = boolean | undefined | null;\n\nexport function mergeVariantToggles<V>(\n  ...toggles: { def?: VariantDef<V>; active: BooleanLike }[]\n) {\n  const definedToggles = toggles.filter((x) => !!x.def) as {\n    def: VariantDef<V>;\n    active: BooleanLike;\n  }[];\n  const grouped = groupBy(definedToggles, ({ def }) => def.group as string);\n  return mapValues(grouped, (subToggles) => {\n    return Object.fromEntries(\n      subToggles.map(({ def, active }) => [def.variant, !!active])\n    );\n  });\n}\n\nexport function noOutline() {\n  return { outline: \"none\" };\n}\n\nexport function getPlumeType(child: React.ReactChild): string | undefined {\n  if (!React.isValidElement(child)) {\n    return undefined;\n  }\n  const childType = child.type as any;\n  return (childType.__plumeType || childType.getPlumeType?.(child.props)) as\n    | string\n    | undefined;\n}\n","import * as React from \"react\";\nimport { omit, pick } from \"../../common\";\nimport { Overrides } from \"../../render/elements\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\n\ninterface CommonProps {\n  showStartIcon?: boolean;\n  showEndIcon?: boolean;\n  startIcon?: React.ReactNode;\n  endIcon?: React.ReactNode;\n  children?: React.ReactNode;\n  isDisabled?: boolean;\n}\n\ninterface HtmlButtonProps\n  extends Omit<React.ComponentProps<\"button\">, \"ref\" | \"disabled\"> {}\n\ninterface HtmlAnchorProps\n  extends Omit<React.ComponentProps<\"a\">, \"ref\" | \"href\"> {\n  link?: string;\n}\n\nexport type BaseButtonProps = CommonProps & HtmlButtonProps & HtmlAnchorProps;\n\nexport type HtmlAnchorOnlyProps = Exclude<\n  keyof HtmlAnchorProps,\n  keyof HtmlButtonProps\n>;\nexport type HtmlButtonOnlyProps = Exclude<\n  keyof HtmlButtonProps,\n  keyof HtmlAnchorProps\n>;\n\nexport type ButtonRef = React.Ref<HTMLButtonElement | HTMLAnchorElement>;\n\ninterface ButtonConfig<C extends AnyPlasmicClass> {\n  showStartIconVariant: VariantDef<PlasmicClassVariants<C>>;\n  showEndIconVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  startIconSlot?: keyof PlasmicClassArgs<C>;\n  endIconSlot?: keyof PlasmicClassArgs<C>;\n  contentSlot: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useButton<P extends BaseButtonProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: ButtonConfig<C>,\n  ref: ButtonRef = null\n) {\n  const {\n    link,\n    isDisabled,\n    startIcon,\n    endIcon,\n    showStartIcon,\n    showEndIcon,\n    children,\n    ...rest\n  } = props;\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.showStartIconVariant, active: showStartIcon },\n      { def: config.showEndIconVariant, active: showEndIcon },\n      { def: config.isDisabledVariant, active: isDisabled }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    ...(config.startIconSlot && { [config.startIconSlot]: startIcon }),\n    ...(config.endIconSlot && { [config.endIconSlot]: endIcon }),\n    [config.contentSlot]: children,\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      as: !!link ? \"a\" : \"button\",\n      props: {\n        ...omit(\n          rest as any,\n          ...plasmicClass.internalArgProps,\n          ...plasmicClass.internalVariantProps\n        ),\n        ref: ref,\n        disabled: isDisabled,\n        ...(!!link && { href: link }),\n      },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import * as React from \"react\";\nimport { pick, pickBy } from \"../common\";\nimport {\n  AnyPlasmicClass,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n} from \"./plume-utils\";\n\nexport interface StyleProps {\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport function getStyleProps<P extends StyleProps>(props: P): StyleProps {\n  return pick(props, \"className\", \"style\");\n}\n\nexport function getDefaultPlasmicProps<C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: Record<string, any>\n) {\n  return {\n    plasmicProps: {\n      variants: pick(\n        props,\n        ...plasmicClass.internalVariantProps\n      ) as PlasmicClassVariants<C>,\n      args: pick(\n        props,\n        ...plasmicClass.internalArgProps\n      ) as PlasmicClassArgs<C>,\n      overrides: {} as PlasmicClassOverrides<C>,\n    },\n  };\n}\n\nconst RE_DATA_PROP = /^(data-.*)$/;\n\nexport function getDataProps(props: Record<string, any>) {\n  return pickBy(props, (k) => RE_DATA_PROP.test(k));\n}\n","import { useCheckbox as useAriaCheckbox } from \"@react-aria/checkbox\";\nimport { VisuallyHidden } from \"@react-aria/visually-hidden\";\nimport { useToggleState } from \"@react-stately/toggle\";\nimport { AriaCheckboxProps } from \"@react-types/checkbox\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\n\nexport type CheckboxRef = React.Ref<CheckboxRefValue>;\nexport interface CheckboxRefValue extends CheckboxState {\n  getRoot: () => HTMLElement | null;\n  focus: () => void;\n  blur: () => void;\n}\n\ninterface CheckboxState {\n  setChecked: (checked: boolean) => void;\n}\n\nexport interface CheckboxProps\n  extends Omit<AriaCheckboxProps, \"isSelected\" | \"defaultSelected\">,\n    StyleProps {\n  /**\n   * Whether the Checkbox is checked or not; controlled\n   */\n  isChecked?: boolean;\n\n  /**\n   * Whether the Checkbox is checked by default; uncontrolled\n   */\n  defaultChecked?: boolean;\n\n  /**\n   * Whether the Checkbox is in an \"indeterminate\" state; this usually\n   * refers to a \"check all\" that is used to check / uncheck many other\n   * checkboxes, and is visually indeterminate if some of its controlled\n   * checkboxes are checked and some are not.\n   */\n  isIndeterminate?: boolean;\n}\n\nfunction asAriaCheckboxProps(props: CheckboxProps) {\n  const ariaProps = {\n    ...props,\n    isSelected: props.isChecked,\n    defaultSelected: props.defaultChecked,\n  };\n  delete ariaProps[\"isChecked\"];\n  delete ariaProps[\"defaultChecked\"];\n  return ariaProps;\n}\n\ninterface CheckboxConfig<C extends AnyPlasmicClass> {\n  isCheckedVariant: VariantDef<PlasmicClassVariants<C>>;\n  isIndeterminateVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  noLabelVariant?: VariantDef<PlasmicClassVariants<C>>;\n  labelSlot?: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useCheckbox<P extends CheckboxProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: CheckboxConfig<C>,\n  ref: CheckboxRef = null\n) {\n  const { children, isDisabled, isIndeterminate } = props;\n  useEnsureSSRProvider();\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const rootRef = React.useRef<HTMLElement>(null);\n  const ariaProps = asAriaCheckboxProps(props);\n  const state = useToggleState(ariaProps);\n  const { inputProps } = useAriaCheckbox(ariaProps, state, inputRef);\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      {\n        def: config.isDisabledVariant,\n        active: isDisabled,\n      },\n      {\n        def: config.isCheckedVariant,\n        active: state.isSelected,\n      },\n      {\n        def: config.isIndeterminateVariant,\n        active: isIndeterminate,\n      },\n      {\n        def: config.noLabelVariant,\n        active: !children,\n      }\n    ),\n  };\n  const overrides: Overrides = {\n    [config.root]: {\n      as: \"label\",\n      props: mergeProps(getStyleProps(props), {\n        ref: rootRef,\n      }),\n      wrapChildren: (children: React.ReactNode) => (\n        <>\n          <VisuallyHidden>\n            <input {...inputProps} ref={inputRef} />\n          </VisuallyHidden>\n          {children}\n        </>\n      ),\n    },\n  };\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    ...(config.labelSlot ? { [config.labelSlot]: children } : {}),\n  };\n\n  const plumeState: CheckboxState = React.useMemo(\n    () => ({\n      setChecked: (checked: boolean) => state.setSelected(checked),\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      getRoot: () => rootRef.current,\n      focus: () => inputRef.current?.focus(),\n      blur: () => inputRef.current?.blur(),\n      setChecked: (checked) => plumeState.setChecked(checked),\n    }),\n    [rootRef, inputRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n      args: args as PlasmicClassArgs<C>,\n    },\n    state: plumeState,\n  };\n}\n","/**\n * In general, we try not to expose react-aria's Collections API to Plume users.\n * The Collections API is how react-aria users pass data about collections of\n * things using the built-in Item and Section components, which are abstract,\n * metadata-only components that don't render anything but only serve to specify\n * data.  For example, here's how you would use react-spectrum's Picker:\n *\n *   <Picker>\n *     <Section title=\"Asia\">\n *       <Item key=\"taiwan\">Taiwan</Item>\n *       <Item key=\"japan\">Japan</Item>\n *       <Item key=\"china\">China</Item>\n *     </Section>\n *     <Section title=\"Europe\">\n *       <Item key=\"germany\">Germany</Item>\n *       <Item key=\"france\">France</Item>\n *     </Section>\n *   </Picker>\n *\n * You would re-use this same Item/Section components to pass similar things to\n * Menu, Tabs, etc.\n *\n * For Plasmic, this API is too abstract.  The user has explicitly designed components\n * like Select.Option and Select.OptionGroup, and it is weird that they don't actually\n * use these components. It is more natural to do:\n *\n *   <Select>\n *     <Select.OptionGroup title=\"Asia\">\n *       <Select.Option key=\"taiwan\">Taiwan</Select>\n *     </Select.OptionGroup>\n *   </Select>\n *\n * For Plume, we let users directly use the components they designed, both to collect\n * information and to perform actual rendering.  For example, for Plume,\n * you'd use Select.Option instead of Item, and Select.OptionGroup instead of Section.\n * This means that the Select.Option props will collect the same information Item\n * does.\n *\n * A component like Select.Option then serves two purposes:\n *\n * 1. Allow users to specify the collection of data, like in the above example\n *    Here, we're mainly interested in the props in those ReactElements so\n *    we can pass the Item/Section data onto react-aria's APIs.  We are not\n *    actually rendering these elements.\n * 2. Once react-aria's Collections API has gone through them and built\n *    Collection \"nodes\", we then create cloned versions of these elements\n *    with the corresponding node passed in as a secret prop.  These ReactElements\n *    are then actually used to _render_ the corresponding Option / OptionGroup.\n *\n * This file contains helper functions to help with implementing the above.\n *\n * Note also that most of the collections-based react-aria components expose\n * a parallel API that accepts a list of \"items\" and a render prop, instead\n * of list of Item/Section elements.  This is for efficiency, but we are opting\n * to only support the composite-component pattern for now for simplicity.\n */\n\nimport { Item, Section } from \"@react-stately/collections\";\nimport { Node } from \"@react-types/shared\";\nimport React from \"react\";\nimport { isString } from \"../common\";\nimport { getElementTypeName, toChildArray } from \"../react-utils\";\nimport { getPlumeType, PLUME_STRICT_MODE } from \"./plume-utils\";\n\nexport interface PlasmicLoaderProps<T> {\n  component: string;\n  componentProps: T;\n}\n\n/**\n * Props for a Plume component that corresponds to an Item\n */\nexport interface ItemLikeProps {\n  /**\n   * value key corresponding to this item. Not required if you use the\n   * `key` prop instead.\n   */\n  value?: string | null;\n\n  /**\n   * The text string value corresponding to this item. Used to support\n   * keyboard type-ahead.  If not specified, then will be derived from\n   * `children` if it is a string, or the `value` or `key`.\n   */\n  textValue?: string;\n\n  /**\n   * aria-label for this item.\n   */\n  \"aria-label\"?: string;\n\n  /**\n   * Primary content label for this item.\n   */\n  children?: React.ReactNode;\n\n  /**\n   * If true, this item will not be selectable.\n   */\n  isDisabled?: boolean;\n}\n\ntype LoaderAwareItemLikeProps =\n  | ItemLikeProps\n  | PlasmicLoaderProps<ItemLikeProps>;\n\n/**\n * Props for a Plume component that corresponds to a Section\n */\nexport interface SectionLikeProps {\n  /**\n   * Heading content of the title\n   */\n  title?: React.ReactNode;\n\n  /**\n   * aria-label for this section\n   */\n  \"aria-label\"?: string;\n\n  /**\n   * A list of items that belong in this group\n   */\n  children?: React.ReactNode;\n}\n\ntype LoaderAwareSectionLikeProps =\n  | SectionLikeProps\n  | PlasmicLoaderProps<SectionLikeProps>;\n\nexport type ItemJson = LeafItemJson | SectionJson;\n\nexport type LeafItemJson =\n  | string\n  | {\n      value: string;\n      label?: string;\n      textValue?: string;\n      isDisabled?: boolean;\n    };\n\nexport interface SectionJson {\n  title: string;\n  children: ItemJson[];\n}\n\nexport function deriveItemsFromProps(\n  props: any,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n    invalidChildError?: string;\n    requireItemValue: boolean;\n    ItemComponent?: React.ComponentType<ItemLikeProps>;\n    SectionComponent?: React.ComponentType<SectionLikeProps>;\n    itemsProp?: string;\n  }\n) {\n  if (opts.itemsProp && opts.itemsProp in props) {\n    if (!opts.ItemComponent || !opts.SectionComponent) {\n      throw new Error(`You may need to re-generate your Plasmic* files`);\n    }\n    const items = props[opts.itemsProp] as ItemJson[] | undefined;\n    return deriveItemsFromItemsProp(items, {\n      ItemComponent: opts.ItemComponent,\n      SectionComponent: opts.SectionComponent,\n    });\n  } else {\n    return deriveItemsFromChildren(props.children as React.ReactNode, opts);\n  }\n}\n\nfunction deriveItemsFromItemsProp(\n  items: ItemJson[] | undefined,\n  opts: {\n    ItemComponent: React.ComponentType<ItemLikeProps>;\n    SectionComponent: React.ComponentType<SectionLikeProps>;\n  }\n) {\n  const { ItemComponent, SectionComponent } = opts;\n  const disabledKeys: string[] = [];\n  const transform = (item: ItemJson) => {\n    if (typeof item === \"string\") {\n      return (\n        <ItemComponent key={item} value={item}>\n          {item}\n        </ItemComponent>\n      );\n    } else if (\"children\" in item) {\n      return (\n        <SectionComponent key={item.title} title={item.title}>\n          {item.children.map((x) => transform(x))}\n        </SectionComponent>\n      );\n    } else {\n      if (item.isDisabled) {\n        disabledKeys.push(item.value);\n      }\n      return (\n        <ItemComponent\n          key={item.value}\n          value={item.value}\n          textValue={item.textValue}\n          isDisabled={item.isDisabled}\n        >\n          {item.label ?? item.value}\n        </ItemComponent>\n      );\n    }\n  };\n  return {\n    items: items?.map((x) => transform(x)) ?? [],\n    disabledKeys,\n  };\n}\n\n/**\n * Given children of a component like Select or Menu, derive the items\n * that we will pass into the Collections API.  These will be\n * ReactElement<ItemLikeProps|SectionLikeProps>[].\n *\n * Will also assign keys to items by their index in the collection,\n * and collect the keys of disabled items.\n */\nexport function deriveItemsFromChildren<T extends React.ReactElement>(\n  children: React.ReactNode,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n    invalidChildError?: string;\n    requireItemValue: boolean;\n  }\n) {\n  if (!children) {\n    return {\n      items: [] as T[],\n      disabledKeys: [] as React.Key[],\n    };\n  }\n\n  const { itemPlumeType, sectionPlumeType, invalidChildError } = opts;\n\n  // For Plume items without an explicit key, we assign a key as the index\n  // of the collection.\n  let itemCount = 0;\n  let sectionCount = 0;\n\n  const ensureValue = (element: React.ReactElement) => {\n    if (!propInChild(element, \"value\")) {\n      if (opts.requireItemValue && PLUME_STRICT_MODE) {\n        throw new Error(\n          `Must specify a \"value\" prop for ${getElementTypeName(element)}`\n        );\n      } else {\n        return cloneChild(element, { value: `${itemCount++}` });\n      }\n    } else {\n      // Still increment count even if key is present, so that the\n      // auto-assigned key really reflects the index\n      itemCount++;\n      return element;\n    }\n  };\n\n  const disabledKeys: React.Key[] = [];\n\n  const flattenedChildren = (\n    children: React.ReactNode\n  ): React.ReactElement[] => {\n    return toChildArray(children).flatMap((child) => {\n      if (React.isValidElement(child)) {\n        if (child.type === React.Fragment) {\n          return flattenedChildren(\n            (child as React.ReactElement<{ children: React.ReactNode }>).props\n              .children\n          );\n        }\n        const type = getPlumeType(child);\n        if (type === itemPlumeType) {\n          child = ensureValue(child);\n          const childKey = getItemLikeKey(child);\n          if (getChildProp(child, \"isDisabled\") && !!childKey) {\n            disabledKeys.push(childKey);\n          }\n          return [child];\n        }\n        if (type === sectionPlumeType) {\n          return [\n            cloneChild(child, {\n              // key of section doesn't actually matter, just needs\n              // to be unique\n              key: child.key ?? `section-${sectionCount++}`,\n              children: flattenedChildren(getChildProp(child, \"children\")),\n            }),\n          ];\n        }\n      }\n\n      if (PLUME_STRICT_MODE) {\n        throw new Error(invalidChildError ?? `Unexpected child`);\n      } else {\n        return [];\n      }\n    });\n  };\n\n  return { items: flattenedChildren(children) as T[], disabledKeys };\n}\n\nexport function useDerivedItems(\n  props: any,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n    invalidChildError?: string;\n    requireItemValue: boolean;\n    ItemComponent?: React.ComponentType<ItemLikeProps>;\n    SectionComponent?: React.ComponentType<SectionLikeProps>;\n    itemsProp?: string;\n  }\n) {\n  const { children } = props;\n  const {\n    itemPlumeType,\n    sectionPlumeType,\n    invalidChildError,\n    requireItemValue,\n    ItemComponent,\n    SectionComponent,\n    itemsProp,\n  } = opts;\n  const items = itemsProp ? props[itemsProp] : undefined;\n  return React.useMemo(() => {\n    return deriveItemsFromProps(props, {\n      itemPlumeType,\n      sectionPlumeType,\n      invalidChildError,\n      requireItemValue,\n      itemsProp,\n      ItemComponent,\n      SectionComponent,\n    });\n  }, [\n    children,\n    items,\n    itemPlumeType,\n    sectionPlumeType,\n    invalidChildError,\n    requireItemValue,\n    ItemComponent,\n    SectionComponent,\n  ]);\n}\n\nexport function useDerivedItemsFromChildren<T extends React.ReactElement>(\n  children: React.ReactNode,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n    invalidChildError?: string;\n    requireItemValue: boolean;\n  }\n) {\n  const {\n    itemPlumeType,\n    sectionPlumeType,\n    invalidChildError,\n    requireItemValue,\n  } = opts;\n  return React.useMemo(() => {\n    return deriveItemsFromChildren<T>(children, {\n      itemPlumeType,\n      sectionPlumeType,\n      invalidChildError,\n      requireItemValue,\n    });\n  }, [\n    children,\n    itemPlumeType,\n    sectionPlumeType,\n    invalidChildError,\n    requireItemValue,\n  ]);\n}\n\n/**\n * Given a Collection node, create the React element that we should use\n * to render it.\n */\nexport function renderCollectionNode(node: Node<any>) {\n  // node.rendered should already have our item-like or section-like Plume\n  // component elements, so we just need to clone them with a secret\n  // _node prop that we use to render.\n  return cloneChild(node.rendered as React.ReactElement, {\n    _node: node,\n    key: node.key,\n  });\n}\n\n/**\n * Renders a item-like or section-like Plume component element into an\n * Item or a Section element.\n */\nexport function renderAsCollectionChild<\n  T extends React.ReactElement<\n    LoaderAwareItemLikeProps | LoaderAwareSectionLikeProps\n  >\n>(\n  child: T,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n  }\n) {\n  const plumeType = getPlumeType(child);\n  if (plumeType === opts.itemPlumeType) {\n    const option = child as React.ReactElement<LoaderAwareItemLikeProps>;\n\n    // We look at the children passed to the item-like element, and derive key\n    // or textValue from it if it is a string\n    const content = getChildProp(option, \"children\");\n\n    // The children render prop needs to return an <Item/>\n    return (\n      <Item\n        // We use ItemLike.value if the user explicitly specified a value,\n        // and we fallback to key.  If the user specified neither, then\n        // the Collections API will generate a unique key for this item.\n        key={getItemLikeKey(option)}\n        // textValue is either explicitly specified by the user, or we\n        // try to derive it if `content` is a string.\n        textValue={\n          getChildProp(option, \"textValue\") ??\n          (isString(content)\n            ? content\n            : propInChild(option, \"value\")\n            ? getChildProp(option, \"value\")\n            : option.key)\n        }\n        aria-label={getChildProp(option, \"aria-label\")}\n      >\n        {\n          // Note that what we setting the item-like element as the children\n          // here, and not content; we want the entire item-like Plume element to\n          // end up as Node.rendered.\n        }\n        {option}\n      </Item>\n    );\n  } else {\n    const group = child as React.ReactElement<LoaderAwareSectionLikeProps>;\n    return (\n      <Section\n        // Note that we are using the whole section-like element as the title\n        // here, and not group.props.title; we want the entire section-like\n        // Plume element to end up as Node.rendered.\n        title={group}\n        aria-label={getChildProp(group, \"aria-label\")}\n        // We are flattening and deriving the descendant Options as items here.\n        // group.props.children should've already been cleaned up by\n        // deriveItemsFromChildren()\n        items={getChildProp(group, \"children\") as React.ReactElement[]}\n      >\n        {\n          // We use the same render function to turn descendent Options into Items\n        }\n        {(c: React.ReactElement) => renderAsCollectionChild(c, opts)}\n      </Section>\n    );\n  }\n}\n\nfunction getItemLikeKey(element: React.ReactElement<LoaderAwareItemLikeProps>) {\n  return getChildProp(element, \"value\") ?? element.key;\n}\n\n// PlasmicLoader-aware function to get prop from child.\nexport function getChildProp(child: React.ReactElement, prop: string) {\n  return \"componentProps\" in child.props\n    ? child.props.componentProps[prop]\n    : child.props[prop];\n}\n\n// PlasmicLoader-aware function to check `if (prop in element.props)`.\nfunction propInChild(child: React.ReactElement, prop: string): boolean {\n  return \"componentProps\" in child.props\n    ? prop in child.props.componentProps\n    : prop in child.props;\n}\n\n// PlasmicLoader-aware function to clone React element.\nfunction cloneChild(child: React.ReactElement, props: Record<string, any>) {\n  if ((child.type as any).getPlumeType) {\n    // If React element has getPlumeType(), assume that it is PlasmicLoader,\n    // so add nodeProps to componentProps instead of element props.\n    return React.cloneElement(child, {\n      componentProps: {\n        ...child.props.componentProps,\n        ...props,\n      },\n      ...(props.key ? { key: props.key } : {}),\n    });\n  }\n\n  return React.cloneElement(child, props);\n}\n","import type { Placement } from \"@react-types/overlays\";\nimport type { FocusStrategy } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport type { OverlayTriggerState } from \"@react-stately/overlays\";\n\nexport interface TriggeredOverlayContextValue {\n  triggerRef: React.RefObject<HTMLElement>;\n  state: OverlayTriggerState;\n  autoFocus?: boolean | FocusStrategy;\n\n  placement?: Placement;\n  overlayMatchTriggerWidth?: boolean;\n  overlayMinTriggerWidth?: boolean;\n  overlayWidth?: number;\n}\n\nexport const TriggeredOverlayContext = React.createContext<\n  TriggeredOverlayContextValue | undefined\n>(undefined);\n","import * as React from \"react\";\nimport type { TreeState } from \"@react-stately/tree\";\nimport type { BaseMenuProps } from \"./menu\";\n\nexport interface MenuContextValue {\n  menuProps: BaseMenuProps;\n  state: TreeState<any>;\n}\n\nexport const MenuContext = React.createContext<MenuContextValue | undefined>(\n  undefined\n);\n","import { useMenu as useAriaMenu } from \"@react-aria/menu\";\nimport { useTreeState } from \"@react-stately/tree\";\nimport { AriaMenuProps } from \"@react-types/menu\";\nimport { AriaLabelingProps, DOMProps } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport {\n  renderAsCollectionChild,\n  renderCollectionNode,\n  useDerivedItemsFromChildren,\n} from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  noOutline,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\nimport { TriggeredOverlayContext } from \"../triggered-overlay/context\";\nimport { MenuContext } from \"./context\";\n\nexport interface BaseMenuProps extends DOMProps, AriaLabelingProps, StyleProps {\n  /**\n   * List of `Menu.Item`s or `Menu.Group`s that make up the menu\n   */\n  children?: React.ReactNode;\n\n  /**\n   * Called with the value of a `Menu.Item` when it is selected.\n   */\n  onAction?: (value: string) => void;\n}\n\nexport type MenuRef = React.Ref<MenuRefValue>;\nexport interface MenuRefValue extends MenuState {\n  getRoot: () => HTMLElement | null;\n}\n\nconst COLLECTION_OPTS = {\n  itemPlumeType: \"menu-item\",\n  sectionPlumeType: \"menu-group\",\n};\n\nexport interface MenuConfig<C extends AnyPlasmicClass> {\n  isPlacedTopVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedBottomVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedLeftVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedRightVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  itemsSlot: keyof PlasmicClassArgs<C>;\n  itemsContainer: keyof PlasmicClassOverrides<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\n/**\n * Converts props from BaseMenuProps to react-aria's useMenu() props.\n */\nfunction asAriaMenuProps(props: BaseMenuProps) {\n  const { children, ...rest } = props;\n  const { items, disabledKeys } = useDerivedItemsFromChildren(children, {\n    ...COLLECTION_OPTS,\n    invalidChildError: `Can only use Menu.Item and Menu.Group as children to Menu`,\n    requireItemValue: false,\n  });\n\n  const collectionChildRenderer = React.useCallback(\n    (child: any) => renderAsCollectionChild(child, COLLECTION_OPTS),\n    []\n  );\n\n  return {\n    ariaProps: {\n      ...rest,\n      children: collectionChildRenderer,\n      items,\n      disabledKeys,\n    } as AriaMenuProps<any>,\n  };\n}\n\nexport interface MenuState {\n  getFocusedValue: () => string | null;\n  setFocusedValue: (value: string) => void;\n}\n\nexport function useMenu<P extends BaseMenuProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: MenuConfig<C>,\n  ref: MenuRef = null\n) {\n  useEnsureSSRProvider();\n  const { ariaProps } = asAriaMenuProps(props);\n  const triggerContext = React.useContext(TriggeredOverlayContext);\n  const rootRef = React.useRef<HTMLElement>(null);\n\n  const state = useTreeState(ariaProps);\n\n  const menuListRef = React.useRef<HTMLUListElement>(null);\n\n  const { menuProps } = useAriaMenu(\n    {\n      ...ariaProps,\n      autoFocus: triggerContext?.autoFocus,\n    },\n    state,\n    menuListRef\n  );\n\n  const contextValue = React.useMemo(() => ({ state, menuProps: props }), [\n    state,\n    props,\n  ]);\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: mergeProps(getStyleProps(props), {\n        ref: rootRef,\n      }),\n    },\n    [config.itemsContainer]: {\n      as: \"ul\",\n      props: mergeProps(menuProps, {\n        ref: menuListRef,\n        style: {\n          ...noOutline(),\n        },\n      }),\n    },\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.itemsSlot]: (\n      <MenuContext.Provider value={contextValue}>\n        {Array.from(state.collection).map((node) => renderCollectionNode(node))}\n      </MenuContext.Provider>\n    ),\n  };\n\n  const plumeState: MenuState = React.useMemo(\n    () => ({\n      getFocusedValue: () => state.selectionManager.focusedKey as string | null,\n      setFocusedValue: (value: string) =>\n        state.selectionManager.setFocusedKey(value),\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      getRoot: () => rootRef.current,\n      getFocusedValue: () => plumeState.getFocusedValue(),\n      setFocusedValue: (key) => plumeState.setFocusedValue(key),\n    }),\n    [rootRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n    state: plumeState,\n  };\n}\n","import { Node } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { useMenuSection } from \"@react-aria/menu\";\nimport { useSeparator } from \"@react-aria/separator\";\nimport { pick } from \"../../common\";\nimport { Overrides } from \"../../render/elements\";\nimport { renderCollectionNode, SectionLikeProps } from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n} from \"../plume-utils\";\nimport {\n  getDefaultPlasmicProps,\n  getStyleProps,\n  StyleProps,\n} from \"../props-utils\";\nimport { MenuContext } from \"./context\";\n\nexport interface BaseMenuGroupProps extends SectionLikeProps, StyleProps {}\n\ninterface MenuGroupConfig<C extends AnyPlasmicClass> {\n  noTitleVariant: PlasmicClassVariants<C>;\n  isFirstVariant: PlasmicClassVariants<C>;\n\n  itemsSlot: keyof PlasmicClassArgs<C>;\n  titleSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  separator: keyof PlasmicClassOverrides<C>;\n  titleContainer: keyof PlasmicClassOverrides<C>;\n  itemsContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useMenuGroup<\n  P extends BaseMenuGroupProps,\n  C extends AnyPlasmicClass\n>(plasmicClass: C, props: P, config: MenuGroupConfig<C>) {\n  const context = React.useContext(MenuContext);\n\n  const node = (props as any)._node as\n    | Node<React.ReactElement<BaseMenuGroupProps>>\n    | undefined;\n\n  if (!context || !node) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a Menu.Group within a Menu component.\");\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { headingProps, groupProps } = useMenuSection({\n    heading: props.title,\n    \"aria-label\": props[\"aria-label\"],\n  });\n\n  const { separatorProps } = useSeparator({\n    elementType: \"li\",\n  });\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.noTitleVariant, active: !props.title },\n      {\n        def: config.isFirstVariant,\n        active: context.state.collection.getFirstKey() === node.key,\n      }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.titleSlot]: props.title,\n    [config.itemsSlot]: Array.from(node.childNodes).map((childNode) =>\n      renderCollectionNode(childNode)\n    ),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: getStyleProps(props),\n    },\n    [config.separator]: {\n      props: {\n        ...separatorProps,\n      },\n      as: \"li\",\n    },\n    [config.titleContainer]: {\n      props: {\n        role: \"presentation\",\n        ...headingProps,\n      },\n      ...(!props.title && {\n        render: () => null,\n      }),\n    },\n    [config.itemsContainer]: {\n      props: {\n        ...groupProps,\n      },\n      as: \"ul\",\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { Node } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { useMenuItem as useAriaMenuItem } from \"@react-aria/menu\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { ItemLikeProps } from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  noOutline,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getDefaultPlasmicProps } from \"../props-utils\";\nimport { TriggeredOverlayContext } from \"../triggered-overlay/context\";\nimport { MenuContext } from \"./context\";\n\nexport interface BaseMenuItemProps extends ItemLikeProps {\n  /**\n   * Called when this item is selected\n   */\n  onAction?: (key: string) => void;\n}\n\ninterface MenuItemConfig<C extends AnyPlasmicClass> {\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isHighlightedVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  labelSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  labelContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useMenuItem<\n  P extends BaseMenuItemProps,\n  C extends AnyPlasmicClass\n>(plasmicClass: C, props: P, config: MenuItemConfig<C>) {\n  const menuContext = React.useContext(MenuContext);\n  const triggerContext = React.useContext(TriggeredOverlayContext);\n\n  if (!menuContext) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a Menu.Item within a Menu component.\");\n    }\n\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { children, onAction } = props;\n\n  const { state, menuProps } = menuContext;\n\n  // We pass in the Node secretly as an undocumented prop from <Select />\n  const node = (props as any)._node as Node<\n    React.ReactElement<BaseMenuItemProps>\n  >;\n\n  const isDisabled = state.disabledKeys.has(node.key);\n  const isHighlighted =\n    state.selectionManager.isFocused &&\n    state.selectionManager.focusedKey === node.key;\n\n  const ref = React.useRef<HTMLLIElement>(null);\n\n  const { menuItemProps, labelProps } = useAriaMenuItem(\n    mergeProps(\n      {\n        // We need to merge both the onAction on MenuItem and the onAction\n        // on Menu\n        onAction,\n      },\n      {\n        onAction: menuProps.onAction,\n        onClose: triggerContext?.state.close,\n      },\n      {\n        isDisabled,\n        \"aria-label\": node && node[\"aria-label\"],\n        key: node.key,\n        isVirtualized: false,\n        closeOnSelect: true,\n      }\n    ),\n    state,\n    ref\n  );\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isDisabledVariant, active: isDisabled },\n      { def: config.isHighlightedVariant, active: isHighlighted }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.labelSlot]: children,\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      as: \"li\",\n      props: mergeProps(menuItemProps, { ref, style: noOutline() }),\n    },\n    [config.labelContainer]: {\n      props: { ...labelProps },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { Placement } from \"@react-types/overlays\";\nimport * as React from \"react\";\nimport { useMenuTrigger as useAriaMenuTrigger } from \"@react-aria/menu\";\nimport { usePress } from \"@react-aria/interactions\";\nimport { MenuTriggerState } from \"@react-stately/menu\";\nimport { mergeProps } from \"../../react-utils\";\nimport { BaseMenuProps } from \"../menu/menu\";\nimport { getPlumeType, PLUME_STRICT_MODE } from \"../plume-utils\";\nimport { TriggeredOverlayContextValue } from \"../triggered-overlay/context\";\n\n/**\n * A menu trigger hook that combines react-aria's useMenuTrigger, useAriaMenuTrigger,\n * useOverlayPosition, useOverlay, and usePress\n */\nexport function useMenuTrigger(\n  opts: {\n    isDisabled?: boolean;\n    triggerRef: React.RefObject<HTMLElement>;\n    placement?: Placement;\n    menuMatchTriggerWidth?: boolean;\n    menuWidth?: number;\n    menu:\n      | React.ReactElement<BaseMenuProps>\n      | (() => React.ReactElement<BaseMenuProps>);\n  },\n  state: MenuTriggerState\n) {\n  const {\n    triggerRef,\n    isDisabled,\n    placement,\n    menuMatchTriggerWidth,\n    menuWidth,\n    menu,\n  } = opts;\n\n  const { menuTriggerProps: triggerPressProps, menuProps } = useAriaMenuTrigger(\n    {\n      type: \"menu\",\n      isDisabled,\n    },\n    state,\n    triggerRef\n  );\n\n  const { pressProps: triggerProps } = usePress({\n    ...triggerPressProps,\n    isDisabled,\n  });\n\n  const makeMenu = () => {\n    let realMenu = typeof menu === \"function\" ? menu() : menu;\n    if (!realMenu) {\n      return null;\n    }\n    if (getPlumeType(realMenu) !== \"menu\") {\n      if (PLUME_STRICT_MODE) {\n        throw new Error(`Must use an instance of the Menu component.`);\n      }\n      return null;\n    }\n\n    return React.cloneElement(realMenu, mergeProps(realMenu.props, menuProps));\n  };\n\n  const triggerContext: TriggeredOverlayContextValue = React.useMemo(\n    () => ({\n      triggerRef,\n      state,\n      autoFocus: state.focusStrategy ?? true,\n      placement,\n      overlayMatchTriggerWidth: menuMatchTriggerWidth,\n      overlayMinTriggerWidth: true,\n      overlayWidth: menuWidth,\n    }),\n    [triggerRef, state, placement, menuMatchTriggerWidth, menuWidth]\n  );\n\n  return {\n    triggerProps,\n    makeMenu,\n    triggerContext,\n  };\n}\n","import { Placement } from \"@react-types/overlays\";\nimport * as React from \"react\";\nimport { useMenuTriggerState } from \"@react-stately/menu\";\nimport { mergeProps } from \"../../react-utils\";\nimport { BaseMenuProps } from \"../menu/menu\";\nimport { TriggeredOverlayContext } from \"../triggered-overlay/context\";\nimport { useMenuTrigger } from \"./menu-trigger\";\n\nexport interface DropdownMenuProps {\n  /**\n   * A ReactElement that takes in a `ref` as well as the usual mouse and\n   * pointer events. The dropdown menu will be positioned relative to this\n   * trigger.\n   */\n  children: React.ReactElement;\n\n  /**\n   * The menu to show; must be either a ReactElement of Menu type, or\n   * a function that creates one if you prefer to delay creating it until\n   * the menu has been triggered.\n   */\n  menu:\n    | React.ReactElement<BaseMenuProps>\n    | (() => React.ReactElement<BaseMenuProps>);\n\n  /**\n   * Where to place the menu relative to the trigger.\n   */\n  placement?: Placement;\n\n  /**\n   * Whether the menu is currently shown.\n   */\n  isOpen?: boolean;\n\n  /**\n   * Uncontrolled open state.\n   */\n  defaultOpen?: boolean;\n\n  /**\n   * Event handler fired when Menu's open state changes\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n}\n\nexport function DropdownMenu(props: DropdownMenuProps) {\n  const {\n    isOpen,\n    defaultOpen,\n    onOpenChange,\n    children,\n    placement,\n    menu,\n  } = props;\n\n  const triggerRef = React.useRef<HTMLElement>(null);\n\n  const state = useMenuTriggerState({\n    isOpen,\n    defaultOpen,\n    onOpenChange,\n    shouldFlip: true,\n  });\n\n  const { triggerProps, makeMenu, triggerContext } = useMenuTrigger(\n    {\n      triggerRef,\n      placement,\n      menu,\n    },\n    state\n  );\n\n  return (\n    <TriggeredOverlayContext.Provider value={triggerContext}>\n      {React.cloneElement(\n        children,\n        mergeProps(children.props, triggerProps, { ref: triggerRef })\n      )}\n      {state.isOpen && makeMenu()}\n    </TriggeredOverlayContext.Provider>\n  );\n}\n","import { Placement } from \"@react-types/overlays\";\nimport { DOMProps, FocusableProps } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { useFocusable } from \"@react-aria/focus\";\nimport { useMenuTriggerState } from \"@react-stately/menu\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport { BaseMenuProps } from \"../menu/menu\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\nimport { TriggeredOverlayContext } from \"../triggered-overlay/context\";\nimport { useMenuTrigger } from \"./menu-trigger\";\n\nexport interface BaseMenuButtonProps\n  extends DOMProps,\n    FocusableProps,\n    StyleProps,\n    Pick<React.ComponentProps<\"button\">, \"title\"> {\n  /**\n   * The menu to show; can either be a Menu instance, or a function that returns a Menu\n   * instance if you want to defer creating the instance till when it's opened.\n   */\n  menu:\n    | React.ReactElement<BaseMenuProps>\n    | (() => React.ReactElement<BaseMenuProps>);\n\n  /**\n   * Whether the button is disabled\n   */\n  isDisabled?: boolean;\n\n  /**\n   * Whether the menu is currently shown.\n   */\n  isOpen?: boolean;\n\n  /**\n   * Uncontrolled open state\n   */\n  defaultOpen?: boolean;\n\n  /**\n   * Event handler fired when Menu's open state changes\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n\n  /**\n   * Desired placement location of the Select dropdown\n   */\n  placement?: Placement;\n  /**\n   * If true, menu width will always match the trigger button width.\n   * If false, then menu width will have min-width matching the\n   * trigger button width.\n   */\n  menuMatchTriggerWidth?: boolean;\n\n  /**\n   * If set, menu width will be exactly this width, overriding\n   * menuMatchTriggerWidth.\n   */\n  menuWidth?: number;\n}\n\nexport interface MenuButtonConfig<C extends AnyPlasmicClass> {\n  isOpenVariant: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  menuSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  trigger: keyof PlasmicClassOverrides<C>;\n}\n\ninterface MenuButtonState {\n  open: () => void;\n  close: () => void;\n  isOpen: () => boolean;\n}\n\nexport type MenuButtonRef = React.Ref<MenuButtonRefValue>;\n\nexport interface MenuButtonRefValue extends MenuButtonState {\n  getRoot: () => HTMLElement | null;\n  getTrigger: () => HTMLElement | null;\n  focus: () => void;\n  blur: () => void;\n}\n\nexport function useMenuButton<\n  P extends BaseMenuButtonProps,\n  C extends AnyPlasmicClass\n>(\n  plasmicClass: C,\n  props: P,\n  config: MenuButtonConfig<C>,\n  outerRef: MenuButtonRef = null\n) {\n  const {\n    placement,\n    isOpen,\n    defaultOpen,\n    onOpenChange,\n    isDisabled,\n    menu,\n    autoFocus,\n    menuMatchTriggerWidth,\n    menuWidth,\n  } = props;\n\n  useEnsureSSRProvider();\n  const rootRef = React.useRef<HTMLElement>(null);\n  const triggerRef = React.useRef<HTMLButtonElement>(null);\n\n  const state = useMenuTriggerState({\n    isOpen,\n    defaultOpen,\n    onOpenChange,\n    shouldFlip: true,\n  });\n\n  const { triggerProps, makeMenu, triggerContext } = useMenuTrigger(\n    {\n      isDisabled,\n      triggerRef,\n      placement,\n      menuMatchTriggerWidth,\n      menuWidth,\n      menu,\n    },\n    state\n  );\n\n  const { focusableProps: triggerFocusProps } = useFocusable(props, triggerRef);\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isOpenVariant, active: state.isOpen },\n      { def: config.isDisabledVariant, active: isDisabled }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.menuSlot]: state.isOpen ? makeMenu() : undefined,\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      wrapChildren: (children) => (\n        <TriggeredOverlayContext.Provider value={triggerContext}>\n          {children}\n        </TriggeredOverlayContext.Provider>\n      ),\n      props: {\n        ref: rootRef,\n      },\n    },\n    [config.trigger]: {\n      props: mergeProps(\n        triggerProps,\n        triggerFocusProps,\n        getStyleProps(props),\n        pick(props, \"title\"),\n        {\n          ref: triggerRef,\n          autoFocus,\n          disabled: !!isDisabled,\n          // Make sure this button is not interpreted as submit\n          type: \"button\",\n        }\n      ),\n    },\n  };\n\n  const plumeState: MenuButtonState = React.useMemo(\n    () => ({\n      open: () => state.open(),\n      close: () => state.close(),\n      isOpen: () => state.isOpen,\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    outerRef,\n    () => ({\n      getRoot: () => rootRef.current,\n      getTrigger: () => triggerRef.current,\n      focus: () => triggerRef.current && triggerRef.current.focus(),\n      blur: () => triggerRef.current && triggerRef.current.blur(),\n      open: plumeState.open,\n      close: plumeState.close,\n      isOpen: plumeState.isOpen,\n    }),\n    [rootRef, triggerRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n    state: plumeState,\n  };\n}\n","import * as React from \"react\";\nimport type { ListState } from \"@react-stately/list\";\n\nexport const SelectContext = React.createContext<ListState<any> | undefined>(\n  undefined\n);\n","import { usePlasmicCanvasContext } from \"@plasmicapp/host\";\nimport { usePress } from \"@react-aria/interactions\";\nimport { useListBox } from \"@react-aria/listbox\";\nimport { HiddenSelect, useSelect as useAriaSelect } from \"@react-aria/select\";\nimport {\n  SelectState as AriaSelectState,\n  useSelectState as useAriaSelectState,\n} from \"@react-stately/select\";\nimport { Placement } from \"@react-types/overlays\";\nimport { AriaSelectProps } from \"@react-types/select\";\nimport {\n  AriaLabelingProps,\n  DOMProps,\n  FocusableDOMProps,\n  FocusableProps,\n  InputBase,\n} from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport {\n  getChildProp,\n  ItemJson,\n  ItemLikeProps,\n  renderAsCollectionChild,\n  renderCollectionNode,\n  SectionLikeProps,\n  useDerivedItems,\n} from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  noOutline,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\nimport {\n  TriggeredOverlayContext,\n  TriggeredOverlayContextValue,\n} from \"../triggered-overlay/context\";\nimport { SelectContext } from \"./context\";\nimport { BaseSelectOptionProps } from \"./select-option\";\nimport { BaseSelectOptionGroupProps } from \"./select-option-group\";\n\nexport interface BaseSelectProps\n  extends DOMProps,\n    AriaLabelingProps,\n    FocusableDOMProps,\n    InputBase,\n    FocusableProps,\n    StyleProps {\n  /**\n   * Key of the currently selected value\n   */\n  value?: string | null;\n\n  /**\n   * Event handler fired when currently selected value changes\n   */\n  onChange?: (value: string | null) => void;\n\n  /**\n   * Uncontrolled key of the default selected value\n   */\n  defaultValue?: string;\n\n  /**\n   * List of Select.Options\n   */\n  children?: React.ReactNode;\n\n  /**\n   * List of options as an array, instead of using `children` prop. If this\n   * is passed in, then `children` is ignored.\n   *\n   * The options can be a list of strings, or a list of objects with\n   * fields `value` (for the value of the option), `label` (for what's rendered\n   * in the option), and `isDisabled` (if the option should be disabled).\n   */\n  options?: ItemJson[];\n\n  /**\n   * Whether the Select is currently open\n   */\n  isOpen?: boolean;\n\n  /**\n   * Event handler fired when Select's open state changes\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n\n  /**\n   * Uncontrolled default open state\n   */\n  defaultOpen?: boolean;\n\n  /**\n   * Form name of the select element\n   */\n  name?: string;\n\n  /**\n   * By default, Select will render whatever is in Select.Option as the\n   * content in the trigger button when it is selected.  You can override\n   * what content by passing in `selectedContent` here.\n   */\n  selectedContent?: React.ReactNode;\n\n  /**\n   * Desired placement location of the Select dropdown\n   */\n  placement?: Placement;\n\n  /**\n   * If true, menu width will always match the trigger button width.\n   * If false, then menu width will have min-width matching the\n   * trigger button width.\n   */\n  menuMatchTriggerWidth?: boolean;\n\n  /**\n   * If set, menu width will be exactly this width, overriding\n   * menuMatchTriggerWidth.\n   */\n  menuWidth?: number;\n\n  /**\n   * Content to display when nothing is selected.\n   */\n  placeholder?: React.ReactNode;\n}\n\nconst COLLECTION_OPTS = {\n  itemPlumeType: \"select-option\",\n  sectionPlumeType: \"select-option-group\",\n};\n\ntype AriaOptionType = React.ReactElement<BaseSelectOptionProps>;\ntype AriaGroupType = React.ReactElement<BaseSelectOptionGroupProps>;\ntype AriaSelectItemType = AriaOptionType | AriaGroupType;\n\n/**\n * Converts props in our BaseSelectProps into props that react-aria's\n * useSelect() understands.\n *\n * Because we're not exposing the Collections API (see ./index.tsx),\n * we are converting our own API into props for useSelect.\n *\n * Specifically, in Plume's API,\n * - `children` flattens to a list of ReactElements of type Select.Option\n *   or Select.OptionGroup\n *\n * and we map it this way to the Collections API:\n * - `items` is a list of those flattened ReactElements from `children`!\n * - `children`, as a render prop, is supposed to take one of the `items`\n *   and return a `Section` or `Item` element. We take an Option/OptionGroup\n *   element, and use its props to render the appropriate `Section` or\n *   `Item`. The \"trick\" here is that we then stuff the Option element as\n *   `Item.children`, and the OptionGroup element as `Section.title`.\n *\n * When the Collections API does its work deriving `Node`s, the corresponding\n * Option/OptionGroup ReactElements will end up as `Node.rendered`.\n *\n * Then, when we are actually rendering the content of the dropdown, we\n * iterate through each collected `Node`, and renders\n * React.cloneElement(Node.rendered, {_node: node}).  This \"secretly\" passes\n * the derived collection `Node` as a prop to Option and OptionGroup, and they\n * can make use of the derived `Node.key` etc in their rendering functions.\n *\n * One thing to note here is that we never \"rendered\" the Option/OptionGroup\n * React elements that the user constructed; instead, we just looked at the\n * props used on those elements, and passed those onto the Collections API.\n * What gets rendered to the screen is the cloned version of these elements\n * with the secret derived `_node` prop.  That means Option and OptionGroup\n * render functions can assume that _node is passed in.\n */\nfunction useAriaSelectProps(props: BaseSelectProps, config: SelectConfig<any>) {\n  let {\n    value,\n    defaultValue,\n    children,\n    onChange,\n    placement,\n    menuMatchTriggerWidth,\n    menuWidth,\n    ...rest\n  } = props;\n\n  const { items, disabledKeys } = useDerivedItems(props, {\n    ...COLLECTION_OPTS,\n    invalidChildError: `Can only use Select.Option and Select.OptionGroup as children to Select`,\n    requireItemValue: true,\n    ItemComponent: config.OptionComponent,\n    SectionComponent: config.OptionGroupComponent,\n    itemsProp: \"options\",\n  });\n\n  const collectionChildRenderer = React.useCallback(\n    (child: any) => renderAsCollectionChild(child, COLLECTION_OPTS),\n    []\n  );\n\n  const onSelectionChange = React.useMemo(() => {\n    if (onChange) {\n      return (val: string | null) =>\n        onChange!(\n          (val == null || val === \"null\" ? null : val) as string | null\n        );\n    } else {\n      return undefined;\n    }\n  }, [onChange]);\n\n  return {\n    ariaProps: {\n      ...rest,\n      children: collectionChildRenderer,\n      onSelectionChange,\n      items,\n      disabledKeys,\n      defaultSelectedKey: defaultValue,\n\n      // react-aria is picky about selectedKey; if it is null, it means \"no selection\";\n      // if it is undefined, it means \"uncontrolled\".  So here, if the user passes in a\n      // value prop, then we make sure selectedKey will be null and not undefined, so\n      // we don't accidentally enter uncontrolled mode.\n      ...(\"value\" in props && { selectedKey: value ?? null }),\n    } as AriaSelectProps<AriaSelectItemType>,\n  };\n}\n\nexport type SelectRef = React.Ref<SelectRefValue>;\n\nexport interface SelectRefValue extends SelectState {\n  getTrigger: () => HTMLElement | null;\n  getRoot: () => HTMLElement | null;\n  focus: () => void;\n  blur: () => void;\n}\n\ninterface SelectConfig<C extends AnyPlasmicClass> {\n  placeholderVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isOpenVariant: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  triggerContentSlot: keyof PlasmicClassArgs<C>;\n  optionsSlot: keyof PlasmicClassArgs<C>;\n  placeholderSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  trigger: keyof PlasmicClassOverrides<C>;\n  overlay: keyof PlasmicClassOverrides<C>;\n  optionsContainer: keyof PlasmicClassOverrides<C>;\n\n  OptionComponent?: React.ComponentType<ItemLikeProps>;\n  OptionGroupComponent?: React.ComponentType<SectionLikeProps>;\n}\n\ninterface SelectState {\n  open: () => void;\n  close: () => void;\n  isOpen: () => boolean;\n  getSelectedValue: () => string | null;\n  setSelectedValue: (value: string | null) => void;\n}\n\nexport function useSelect<P extends BaseSelectProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: SelectConfig<C>,\n  ref: React.Ref<SelectRefValue> = null\n) {\n  useEnsureSSRProvider();\n  const { ariaProps } = useAriaSelectProps(props, config);\n  const { placement } = props;\n  const state = useAriaSelectState<AriaSelectItemType>(ariaProps);\n  const triggerRef = React.useRef<HTMLButtonElement>(null);\n  const rootRef = React.useRef<HTMLElement>(null);\n\n  const {\n    isDisabled,\n    name,\n    menuWidth,\n    menuMatchTriggerWidth,\n    autoFocus,\n    placeholder,\n    selectedContent,\n  } = props;\n\n  const canvasCtx = usePlasmicCanvasContext();\n\n  const { triggerProps: triggerPressProps, menuProps } = useAriaSelect(\n    ariaProps,\n    state,\n    triggerRef\n  );\n\n  const { pressProps: triggerProps } = usePress({\n    ...triggerPressProps,\n    isDisabled,\n  });\n\n  const triggerContent = state.selectedItem\n    ? selectedContent ?? getChildProp(state.selectedItem.value, \"children\")\n    : null;\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isOpenVariant, active: state.isOpen },\n      { def: config.placeholderVariant, active: !state.selectedItem },\n      { def: config.isDisabledVariant, active: isDisabled }\n    ),\n  };\n\n  const triggerContext: TriggeredOverlayContextValue = React.useMemo(\n    () => ({\n      triggerRef,\n      state,\n      placement,\n      overlayMatchTriggerWidth: menuMatchTriggerWidth,\n      overlayMinTriggerWidth: true,\n      overlayWidth: menuWidth,\n    }),\n    [triggerRef, state, placement, menuMatchTriggerWidth, menuWidth]\n  );\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: mergeProps(getStyleProps(props), {\n        ref: rootRef,\n      }),\n      wrapChildren: (children) => (\n        <>\n          {!canvasCtx && (\n            <HiddenSelect\n              state={state}\n              triggerRef={triggerRef}\n              name={name}\n              isDisabled={isDisabled}\n            />\n          )}\n          {children}\n        </>\n      ),\n    },\n    [config.trigger]: {\n      props: mergeProps(canvasCtx ? {} : triggerProps, {\n        ref: triggerRef,\n        autoFocus,\n        disabled: !!isDisabled,\n        // Don't trigger form submission!\n        type: \"button\",\n      }),\n    },\n    [config.overlay]: {\n      wrap: (content) => (\n        <TriggeredOverlayContext.Provider value={triggerContext}>\n          {content}\n        </TriggeredOverlayContext.Provider>\n      ),\n    },\n    [config.optionsContainer]: {\n      wrap: (content) => (\n        <ListBoxWrapper state={state} menuProps={menuProps}>\n          {content as React.ReactElement}\n        </ListBoxWrapper>\n      ),\n    },\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.triggerContentSlot]: triggerContent,\n    [config.placeholderSlot]: placeholder,\n    [config.optionsSlot]: (\n      <SelectContext.Provider value={state}>\n        {Array.from(state.collection).map((node) => renderCollectionNode(node))}\n      </SelectContext.Provider>\n    ),\n  };\n\n  const plumeState: SelectState = React.useMemo(\n    () => ({\n      open: () => state.open(),\n      close: () => state.close(),\n      isOpen: () => state.isOpen,\n      getSelectedValue: () =>\n        state.selectedKey ? `${state.selectedKey}` : null,\n      setSelectedValue: (key) => state.setSelectedKey(key as any),\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      getRoot: () => rootRef.current,\n      getTrigger: () => triggerRef.current,\n      focus: () => triggerRef.current?.focus(),\n      blur: () => triggerRef.current?.blur(),\n      open: () => plumeState.open(),\n      close: () => plumeState.close(),\n      isOpen: () => plumeState.isOpen(),\n      getSelectedValue: () => plumeState.getSelectedValue(),\n      setSelectedValue: (key) => plumeState.setSelectedValue(key),\n    }),\n    [rootRef, triggerRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n    state: plumeState,\n  };\n}\n\nfunction ListBoxWrapper(props: {\n  state: AriaSelectState<any>;\n  menuProps: React.HTMLAttributes<Element>;\n  children: React.ReactElement;\n}) {\n  const { state, menuProps, children } = props;\n\n  const ref = React.useRef<HTMLElement>(null);\n  const canvasCtx = usePlasmicCanvasContext();\n\n  const { listBoxProps } = useListBox(\n    {\n      ...menuProps,\n      isVirtualized: false,\n      autoFocus: state.focusStrategy || true,\n      disallowEmptySelection: true,\n    },\n    state,\n    ref\n  );\n\n  return React.cloneElement(\n    children,\n    mergeProps(children.props, canvasCtx ? {} : listBoxProps, {\n      style: noOutline(),\n      ref,\n    })\n  );\n}\n","import { usePlasmicCanvasContext } from \"@plasmicapp/host\";\nimport { useOption as useAriaOption } from \"@react-aria/listbox\";\nimport { Node } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps, mergeRefs } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { ItemLikeProps } from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  noOutline,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n  VariantDef,\n} from \"../plume-utils\";\nimport {\n  getDefaultPlasmicProps,\n  getStyleProps,\n  StyleProps,\n} from \"../props-utils\";\nimport { SelectContext } from \"./context\";\n\nexport interface BaseSelectOptionProps extends ItemLikeProps, StyleProps {}\n\ninterface SelectOptionConfig<C extends AnyPlasmicClass> {\n  isSelectedVariant: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isHighlightedVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  labelSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  labelContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport type SelectOptionRef = React.Ref<HTMLElement>;\n\nexport function useSelectOption<\n  P extends BaseSelectOptionProps,\n  C extends AnyPlasmicClass\n>(\n  plasmicClass: C,\n  props: P,\n  config: SelectOptionConfig<C>,\n  outerRef: SelectOptionRef = null\n) {\n  const state = React.useContext(SelectContext);\n\n  if (!state) {\n    // If no context, then we are being incorrectly used.  Complain or just don't\n    // bother installing any hooks.  It's okay to violate rules of hooks here\n    // because this instance won't suddenly be used correctly in another render.\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\n        \"You can only use a Select.Option within a Select component.\"\n      );\n    }\n\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { children } = props;\n\n  const canvasCtx = usePlasmicCanvasContext();\n  const rootRef = React.useRef<HTMLElement>(null);\n  const onRef = mergeRefs(rootRef, outerRef);\n\n  // We pass in the Node secretly as an undocumented prop from <Select />\n  const node = (props as any)._node as Node<\n    React.ReactElement<BaseSelectOptionProps>\n  >;\n\n  const isSelected = state.selectionManager.isSelected(node.key);\n  const isDisabled = state.disabledKeys.has(node.key);\n  const isHighlighted =\n    state.selectionManager.isFocused &&\n    state.selectionManager.focusedKey === node.key;\n\n  const { optionProps, labelProps } = useAriaOption(\n    {\n      isSelected,\n      isDisabled,\n      \"aria-label\": node && node[\"aria-label\"],\n      key: node.key,\n      shouldSelectOnPressUp: true,\n      shouldFocusOnHover: true,\n      isVirtualized: false,\n      shouldUseVirtualFocus: !!canvasCtx,\n    },\n    state,\n    rootRef\n  );\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isSelectedVariant, active: isSelected },\n      { def: config.isDisabledVariant, active: isDisabled },\n      { def: config.isHighlightedVariant, active: isHighlighted }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.labelSlot]: children,\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: mergeProps(canvasCtx ? {} : optionProps, getStyleProps(props), {\n        ref: onRef,\n        style: noOutline(),\n      }),\n    },\n    [config.labelContainer]: {\n      props: labelProps,\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { Node } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { useListBoxSection } from \"@react-aria/listbox\";\nimport { useSeparator } from \"@react-aria/separator\";\nimport { pick } from \"../../common\";\nimport { Overrides } from \"../../render/elements\";\nimport { renderCollectionNode, SectionLikeProps } from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n} from \"../plume-utils\";\nimport {\n  getDefaultPlasmicProps,\n  getStyleProps,\n  StyleProps,\n} from \"../props-utils\";\nimport { SelectContext } from \"./context\";\n\nexport interface BaseSelectOptionGroupProps\n  extends SectionLikeProps,\n    StyleProps {}\n\ninterface SelectOptionGroupConfig<C extends AnyPlasmicClass> {\n  noTitleVariant: PlasmicClassVariants<C>;\n  isFirstVariant: PlasmicClassVariants<C>;\n\n  optionsSlot: keyof PlasmicClassArgs<C>;\n  titleSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  separator: keyof PlasmicClassOverrides<C>;\n  titleContainer: keyof PlasmicClassOverrides<C>;\n  optionsContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useSelectOptionGroup<\n  P extends BaseSelectOptionGroupProps,\n  C extends AnyPlasmicClass\n>(plasmicClass: C, props: P, config: SelectOptionGroupConfig<C>) {\n  const state = React.useContext(SelectContext);\n\n  // `node` should exist if the OptionGroup was instantiated properly\n  // within a Select\n  const node = (props as any)._node as\n    | Node<React.ReactElement<BaseSelectOptionGroupProps>>\n    | undefined;\n\n  if (!state || !node) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\n        \"You can only use a Select.OptionGroup within a Select component.\"\n      );\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { headingProps, groupProps } = useListBoxSection({\n    heading: props.title,\n    \"aria-label\": props[\"aria-label\"],\n  });\n\n  const { separatorProps } = useSeparator({\n    elementType: \"li\",\n  });\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.noTitleVariant, active: !props.title },\n      {\n        def: config.isFirstVariant,\n        active: state.collection.getFirstKey() === node.key,\n      }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.titleSlot]: props.title,\n    [config.optionsSlot]: Array.from(node.childNodes).map((childNode) =>\n      renderCollectionNode(childNode)\n    ),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: getStyleProps(props),\n    },\n    [config.separator]: {\n      props: {\n        ...separatorProps,\n      },\n    },\n    [config.titleContainer]: {\n      props: {\n        role: \"presentation\",\n        ...headingProps,\n      },\n      ...(!props.title && {\n        render: () => null,\n      }),\n    },\n    [config.optionsContainer]: {\n      props: {\n        ...groupProps,\n      },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { useSwitch as useAriaSwitch } from \"@react-aria/switch\";\nimport { VisuallyHidden } from \"@react-aria/visually-hidden\";\nimport { useToggleState } from \"@react-stately/toggle\";\nimport { AriaSwitchProps } from \"@react-types/switch\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\n\nexport type SwitchRef = React.Ref<SwitchRefValue>;\nexport interface SwitchRefValue extends SwitchState {\n  getRoot: () => HTMLElement | null;\n  focus: () => void;\n  blur: () => void;\n}\n\ninterface SwitchState {\n  setChecked: (checked: boolean) => void;\n}\n\nexport interface SwitchProps\n  extends Omit<AriaSwitchProps, \"isSelected\" | \"defaultSelected\">,\n    StyleProps {\n  /**\n   * Whether the Switch is checked or not; controlled\n   */\n  isChecked?: boolean;\n\n  /**\n   * Whether the Switch is checked by default; uncontrolled\n   */\n  defaultChecked?: boolean;\n}\n\nfunction asAriaSwitchProps(props: SwitchProps) {\n  const ariaProps = {\n    ...props,\n    isSelected: props.isChecked,\n    defaultSelected: props.defaultChecked,\n  };\n  delete ariaProps[\"isChecked\"];\n  delete ariaProps[\"defaultChecked\"];\n  return ariaProps;\n}\n\ninterface SwitchConfig<C extends AnyPlasmicClass> {\n  isCheckedVariant: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  noLabelVariant?: VariantDef<PlasmicClassVariants<C>>;\n  labelSlot?: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useSwitch<P extends SwitchProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: SwitchConfig<C>,\n  ref: SwitchRef = null\n) {\n  const { children, isDisabled } = props;\n  useEnsureSSRProvider();\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const rootRef = React.useRef<HTMLElement>(null);\n  const ariaProps = asAriaSwitchProps(props);\n  const state = useToggleState(ariaProps);\n  const { inputProps } = useAriaSwitch(ariaProps, state, inputRef);\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      {\n        def: config.isDisabledVariant,\n        active: isDisabled,\n      },\n      {\n        def: config.isCheckedVariant,\n        active: state.isSelected,\n      },\n      {\n        def: config.noLabelVariant,\n        active: !children,\n      }\n    ),\n  };\n  const overrides: Overrides = {\n    [config.root]: {\n      as: \"label\",\n      props: mergeProps(getStyleProps(props), {\n        ref: rootRef,\n      }),\n      wrapChildren: (children: React.ReactNode) => (\n        <>\n          <VisuallyHidden>\n            <input {...inputProps} ref={inputRef} />\n          </VisuallyHidden>\n          {children}\n        </>\n      ),\n    },\n  };\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    ...(config.labelSlot ? { [config.labelSlot]: children } : {}),\n  };\n\n  const plumeState: SwitchState = React.useMemo(\n    () => ({\n      setChecked: (checked: boolean) => state.setSelected(checked),\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      getRoot: () => rootRef.current,\n      focus: () => inputRef.current?.focus(),\n      blur: () => inputRef.current?.blur(),\n      setChecked: (checked) => plumeState.setChecked(checked),\n    }),\n    [rootRef, inputRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n      args: args as PlasmicClassArgs<C>,\n    },\n    state: plumeState,\n  };\n}\n","import * as React from \"react\";\nimport { omit, pick } from \"../../common\";\nimport { Overrides } from \"../../render/elements\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\n\nexport interface BaseTextInputProps\n  extends Omit<React.ComponentProps<\"input\">, \"type\" | \"disabled\"> {\n  showStartIcon?: boolean;\n  showEndIcon?: boolean;\n  startIcon?: React.ReactNode;\n  endIcon?: React.ReactNode;\n  isDisabled?: boolean;\n  type?: \"text\" | \"password\" | \"email\" | \"url\" | string;\n  inputClassName?: string;\n  inputStyle?: React.CSSProperties;\n}\n\nexport interface TextInputRefValue {\n  focus: () => void;\n  blur: () => void;\n  getRoot: () => HTMLElement | null;\n  getInput: () => HTMLInputElement | null;\n}\n\nexport type TextInputRef = React.Ref<TextInputRefValue>;\n\ninterface TextInputConfig<C extends AnyPlasmicClass> {\n  showStartIconVariant: VariantDef<PlasmicClassVariants<C>>;\n  showEndIconVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  startIconSlot?: keyof PlasmicClassArgs<C>;\n  endIconSlot?: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n  input: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useTextInput<\n  P extends BaseTextInputProps,\n  C extends AnyPlasmicClass\n>(\n  plasmicClass: C,\n  props: P,\n  config: TextInputConfig<C>,\n  ref: TextInputRef = null\n) {\n  const {\n    isDisabled,\n    startIcon,\n    endIcon,\n    showStartIcon,\n    showEndIcon,\n    className,\n    style,\n    inputClassName,\n    inputStyle,\n    ...rest\n  } = props;\n  const rootRef = React.useRef<HTMLElement>(null);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      focus() {\n        inputRef.current?.focus();\n      },\n      blur() {\n        inputRef.current?.blur();\n      },\n      getRoot() {\n        return rootRef.current;\n      },\n      getInput() {\n        return inputRef.current;\n      },\n    }),\n    [rootRef, inputRef]\n  );\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.showStartIconVariant, active: showStartIcon },\n      { def: config.showEndIconVariant, active: showEndIcon },\n      { def: config.isDisabledVariant, active: isDisabled }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    ...(config.startIconSlot && { [config.startIconSlot]: startIcon }),\n    ...(config.endIconSlot && { [config.endIconSlot]: endIcon }),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: {\n        ref: rootRef,\n        className,\n        style,\n      },\n    },\n    [config.input]: {\n      props: {\n        ...omit(\n          rest as any,\n          // We need to remove `required` from the list of internalArgProps to\n          // be omitted in the props being passed through because Plume pkg\n          // <= 19.1.1 had a bug: input[required] was not linked to the\n          // `required` arg as it should.\n          ...plasmicClass.internalArgProps.filter(\n            (prop) => prop !== \"required\"\n          ),\n          ...plasmicClass.internalVariantProps\n        ),\n        disabled: isDisabled,\n        ref: inputRef,\n        className: inputClassName,\n        style: inputStyle,\n      },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { usePlasmicCanvasContext } from \"@plasmicapp/host\";\nimport { FocusScope } from \"@react-aria/focus\";\nimport {\n  DismissButton,\n  useOverlay,\n  useOverlayPosition,\n} from \"@react-aria/overlays\";\nimport { DOMProps } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { pick } from \"../../common\";\nimport {\n  mergeProps,\n  mergeRefs,\n  useIsomorphicLayoutEffect,\n} from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n  VariantDef,\n} from \"../plume-utils\";\nimport {\n  getDefaultPlasmicProps,\n  getStyleProps,\n  StyleProps,\n} from \"../props-utils\";\nimport { TriggeredOverlayContext } from \"./context\";\n\nexport interface BaseTriggeredOverlayProps extends StyleProps, DOMProps {\n  children?: React.ReactNode;\n}\n\nexport interface TriggeredOverlayConfig<C extends AnyPlasmicClass> {\n  isPlacedTopVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedBottomVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedLeftVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedRightVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  contentSlot: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n  contentContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport type TriggeredOverlayRef = React.Ref<HTMLElement>;\n\nexport function useTriggeredOverlay<\n  P extends BaseTriggeredOverlayProps,\n  C extends AnyPlasmicClass\n>(\n  plasmicClass: C,\n  props: P,\n  config: TriggeredOverlayConfig<C>,\n  outerRef: TriggeredOverlayRef = null,\n  isDismissable = true\n) {\n  const overlayRef = React.useRef<HTMLElement>(null);\n  const onOverlayRef = mergeRefs(overlayRef, outerRef);\n\n  const context = React.useContext(TriggeredOverlayContext);\n\n  if (!context) {\n    // If no context, then we are not being correctly used.  Either complain, or\n    // exit early.  It's okay to exit early and break the rules of React hooks\n    // because we won't suddenly have the appropriate context anyway for this instance.\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\n        \"You can only use a triggered overlay with a TriggeredOverlayContext\"\n      );\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { children } = props;\n  const {\n    triggerRef,\n    placement,\n    overlayMatchTriggerWidth,\n    overlayMinTriggerWidth,\n    overlayWidth,\n    state,\n  } = context;\n\n  // Measure the width of the trigger to inform the width of the menu (below).\n  const [isRendered, setRendered] = React.useState(false);\n  const triggerWidth =\n    triggerRef.current && (overlayMatchTriggerWidth || overlayMinTriggerWidth)\n      ? triggerRef.current.offsetWidth\n      : undefined;\n\n  useIsomorphicLayoutEffect(() => {\n    if (\n      !isRendered &&\n      triggerRef.current &&\n      (overlayMatchTriggerWidth || overlayMinTriggerWidth)\n    ) {\n      setRendered(true);\n    }\n  }, [\n    triggerRef,\n    isRendered,\n    overlayMatchTriggerWidth,\n    overlayMinTriggerWidth,\n  ]);\n\n  const { overlayProps: overlayAriaProps } = useOverlay(\n    {\n      isOpen: state.isOpen,\n      onClose: state.close,\n      isDismissable,\n      shouldCloseOnBlur: true,\n    },\n    overlayRef\n  );\n\n  const {\n    overlayProps: overlayPositionProps,\n    updatePosition,\n    placement: placementAxis,\n  } = useOverlayPosition({\n    targetRef: triggerRef,\n    overlayRef,\n    placement: placement ?? \"bottom left\",\n    shouldFlip: true,\n    isOpen: state.isOpen,\n    onClose: state.close,\n    containerPadding: 0,\n  });\n\n  useIsomorphicLayoutEffect(() => {\n    if (state.isOpen) {\n      requestAnimationFrame(() => {\n        updatePosition();\n      });\n    }\n  }, [state.isOpen, updatePosition]);\n\n  const overlayProps = mergeProps(\n    {\n      style: {\n        left: \"auto\",\n        right: \"auto\",\n        top: \"auto\",\n        bottom: \"auto\",\n        position: \"absolute\",\n        width:\n          overlayWidth ?? (overlayMatchTriggerWidth ? triggerWidth : \"auto\"),\n        minWidth: overlayMinTriggerWidth ? triggerWidth : \"auto\",\n      },\n    },\n    overlayAriaProps,\n    overlayPositionProps\n  );\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isPlacedTopVariant, active: placementAxis === \"top\" },\n      { def: config.isPlacedBottomVariant, active: placementAxis === \"bottom\" },\n      { def: config.isPlacedLeftVariant, active: placementAxis === \"left\" },\n      { def: config.isPlacedRightVariant, active: placementAxis === \"right\" }\n    ),\n  };\n\n  const canvasCtx = usePlasmicCanvasContext();\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.contentSlot]: canvasCtx ? (\n      children\n    ) : (\n      <FocusScope restoreFocus>\n        <DismissButton onDismiss={state.close} />\n        {children}\n        {/* We don't use the DismissButton at the end because it ends up taking up 1px space :-/ */}\n        {/* <DismissButton onDismiss={state.close} /> */}\n      </FocusScope>\n    ),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: mergeProps(overlayProps, getStyleProps(props), {\n        ref: onOverlayRef,\n      }),\n      wrap: (root) => {\n        if (typeof document !== \"undefined\") {\n          return ReactDOM.createPortal(root, document.body);\n        } else {\n          // Possibly being invoked on the server during SSR; no need to\n          // bother with a portal in that case.\n          return root;\n        }\n      },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n"],"names":["runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","uuidv4","replace","c","crypto","getRandomValues","Uint8Array","toString","triggerLogin","appId","authorizeEndpoint","redirectUri","sha256","text","encoder","TextEncoder","data","encode","subtle","digest","hashBuffer","hashArray","Array","from","hashHex","map","b","padStart","join","continueTo","window","location","href","JSON","stringify","code_verifier","localStorage","setItem","code_challenge","params","URLSearchParams","set","url","PlasmicPageGuard","props","minRole","canTriggerLogin","children","dataSourceCtxValue","usePlasmicDataSourceContext","React","useEffect","isUserLoading","user","authRedirectUri","canUserViewPage","isArray","roleIds","includes","withPlasmicPageGuard","WrappedComponent","options","PageGuard","notNil","x","pick","res","pickBy","func","entries","val","omit","isSubset","a1","a2","every","chainSingleArgFuncs","funcs","ensure","isString","groupBy","collection","keyFunc","mapValues","mapper","isBrowser","NONE","useIsomorphicLayoutEffect","useLayoutEffect","createElementWithChildren","elementType","createElement","ensureNotArray","Fragment","toChildArray","isReactChild","flatMap","isReactText","child","isValidElement","isReactNode","mergeProps","restProps","rest","mergePropVals","updateRef","ref","isFrozen","current","mergeRefs","refs","val1","val2","classNames","startsWith","getElementTypeName","element","comp","render","renderStack","as","hasGap","wrappedChildren","wrapFlexContainerChildren","FlexStack_","outerRef","FlexStack","makeStackImpl","Stack","assign","div","a","button","h1","h2","h3","h4","h5","h6","label","form","section","head","main","nav","hasVariant","variants","groupName","variant","groupVariants","className","createPlasmicElement","override","defaultRoot","defaultProps","wrapChildrenInFlex","override2","deriveOverride","mergeOverrideProps","root","wrapChildren","seenElements","Map","createPlasmicElementProxy","defaultElement","isRoot","forNodeName","createPlasmicElementFromJsx","forNode","get","clear","wrapFlexChild","triggerProps","makeFragment","UNSET","defaults","overrides","defaultVal","overrideVal","wrapWithClassName","style","display","mergeVariants","v1","v2","mergeVariantsWithStates","$state","linkedStates","fromEntries","variantGroup","statePath","mergeArgs","mergeFlexOverrides","o1","o2","Set","merged","mergeFlexOverride","fo1","fo2","filter","deriveRenderOpts","config","descendantNames","internalVariantPropNames","internalArgPropNames","reservedPropNames","args","leftoverProps","isDefaultValue","seenDefaultVariants","ensureGlobalVariants","globalVariantValues","process","providerName","toUpperCase","substring","console","warn","PlasmicHeadContext","PlasmicHead","Head","image","content","property","title","description","canonical","plasmicHeadMeta","importName","importPath","isRepeatable","styleSections","PlasmicIcon","PlasmicIconType","IMG_SIZES","DEVICE_SIZES","ALL_SIZES","PlasmicImg","forwardRef","src","displayWidth","displayHeight","displayMinWidth","displayMinHeight","displayMaxWidth","displayMaxHeight","quality","loader","imgRef","loading","imgProps","fullWidth","fullHeight","aspectRatio","srcStr","isSvg","computedDisplayWidth","getPixelLength","spacerWidth","spacerHeight","isFinite","DEFAULT_SVG_WIDTH","Math","round","getWidths","minWidth","sizes","widthDescs","imageLoader","getImageLoader","spacerSvg","spacerSvgBase64","Buffer","btoa","wrapperStyle","spacerStyle","width","maxWidth","height","minHeight","maxHeight","alt","makePicture","opts","supportsUrl","srcSet","wd","transformUrl","format","desc","decoding","endsWith","getClosestPresetSize","nextBiggerIndex","findIndex","w","nextBigger","extra","pixelWidth","pixelMinWidth","max","usefulSizes","size","parsed","parseNumeric","units","num","match","PLASMIC_IMAGE_LOADER","PlasmicLink","platform","nextjsProps","component","legacyBehavior","isInternalHref","to","test","PlasmicTranslatorContext","createContext","isIterable","genTranslatableString","elt","components","componentsCount","getText","node","nodeChildren","hasKey","contents","Children","toArray","componentId","cloneElement","str","Trans","transKey","_t","useContext","warnNoTranslationFunctionAtMostOnce","hasWarned","v","PlasmicSlot","renderPlasmicSlot","defaultContents","maybeString","maybeAsString","nonEmptyProps","p","listeners","queries","matchScreenVariants","query","matchMedia","matches","curScreenVariants","recalculateScreenVariants","screenVariant","ReactDOM","unstable_batchedUpdates","listener","ensureInitCurScreenVariants","addEventListener","createUseScreenVariants","isMulti","screenQueries","updateState","lastScreenVariantsRef","updateIfChanged","splice","indexOf","PlasmicRootContext","PlasmicRootProvider","userAuthToken","dataSourceContextValue","Provider","SSRProvider","PlasmicDataSourceContextProvider","translator","useIsSSR","useAriaIsSSR","useHasPlasmicRoot","hasWarnedSSR","useEnsureSSRProvider","hasRoot","useFocused","useAriaFocusRing","within","isTextInput","isFocused","focusProps","useFocusVisible","isFocusVisible","useFocusedWithin","useFocusVisibleWithin","useHover","isHover","setHover","onMouseEnter","onMouseLeave","usePressed","isPressed","setPressed","onMouseDown","onMouseUp","TRIGGER_TO_HOOK","useTrigger","trigger","ARRAY_SYMBOL","PLASMIC_STATE_PROXY_SYMBOL","UNINITIALIZED","CyclicStatesReferencesError","stateAccessCycle","InvalidOperation","msg","UnknownError","StateSpecNode","specs","_specs","_edges","setSpecs","edges","hasEdge","has","addEdge","clearEdges","makeTransition","isNum","isLeaf","getAllSpecs","hasArrayTransition","getSpec","transformPathStringToObj","splitStatePathPart","split","buildTree","internalSpec","spec","pathObj","path","isRepeated","some","part","rec","currentPath","shallowEqual","nextKey","updateTree","oldNode","nodeSpecs","oldEdges","getSpecTreeLeaves","leaves","findStateCell","pathStr","repetitionIndex","realPath","currRepIndex","canProxy","proxyObjToStateCell","WeakMap","valtioSubscriptions","ensureStateCell","target","stateCell","initialValue","initFunc","initFuncHash","getStateCell","tryGetStateCellFrom$StateRoot","getStateCellFrom$StateRoot","unsubscribeToValtio","$$state","oldValue","stateValues","isValtioProxy","f","subscribeToValtio","maybeValtioProxy","valueProp","env","$props","onChangeProp","unsub","subscribe","initializeStateValue","initialStateCell","proxyRoot","initialStateName","stateAccess","stateInitializationEnv","visited","add","stack","create$StateProxy","internalStateCell","curr","newValue","invokeInitFuncBackwardsCompatible","overrideEnv","clone","initialSpec","isImmutable","mkUntrackedValue","leafHandlers","currPath","currNode","getNextPath","handlers","deleteProperty","Reflect","receiver","nextPath","nextNode","nextSpec","ownKeys","baseObject","proxyObj","Proxy","rootSpecTree","o","envFieldsAreNonNill","$ctx","$queries","extractDollarStateParametersBackwardCompatible","useDollarState","useRef","specTreeLeaves","createValtioProxy","registrationsQueue","create$State","useCallback","initVal","registerInitFunc","deepEqual","inCanvas","newLeaves","arrayEq","old$state","getStateCells","oldStateCell","newStateCell","newSpec","find","sp","init","resetSpecs","newInit","reInitializeState","shift","useSnapshot","sync","initializeCodeComponentStates","states","componentHelpers","child$Props","stateHelpers","plasmicStateName","initializePlasmicStates","generateStateOnChangeProp","generateStateOnChangePropForCodeComponents","stateName","plasmicStatePath","onChangeArgsToValue","apply","generateStateValueProp","isPlasmicStateProxy","is$StateProxy","stateCells","getStateCellsInPlasmicProxy","rootNode","rootPath","isOutside","getStateSpecInPlasmicProxy","isImplicitStateArray","getCurrentInitialValue","resetToInitialValue","xs","ys","_","index","l","t","k","assignValue","baseAssignValue","eq","other","objValue","_classNames","PLUME_STRICT_MODE","setPlumeStrictMode","mode","mergeVariantToggles","toggles","definedToggles","def","grouped","group","subToggles","active","noOutline","outline","getPlumeType","childType","__plumeType","useButton","plasmicClass","link","isDisabled","startIcon","endIcon","showStartIcon","showEndIcon","internalVariantProps","showStartIconVariant","showEndIconVariant","isDisabledVariant","internalArgProps","startIconSlot","endIconSlot","contentSlot","disabled","plasmicProps","getStyleProps","getDefaultPlasmicProps","RE_DATA_PROP","getDataProps","asAriaCheckboxProps","ariaProps","isSelected","isChecked","defaultSelected","defaultChecked","useCheckbox","isIndeterminate","inputRef","rootRef","useToggleState","useAriaCheckbox","inputProps","isCheckedVariant","isIndeterminateVariant","noLabelVariant","VisuallyHidden","labelSlot","plumeState","setChecked","checked","setSelected","getRoot","focus","blur","deriveItemsFromProps","itemsProp","ItemComponent","SectionComponent","items","deriveItemsFromItemsProp","deriveItemsFromChildren","disabledKeys","transform","item","textValue","itemPlumeType","sectionPlumeType","invalidChildError","itemCount","sectionCount","ensureValue","propInChild","requireItemValue","cloneChild","flattenedChildren","childKey","getItemLikeKey","getChildProp","useDerivedItems","useMemo","useDerivedItemsFromChildren","renderCollectionNode","rendered","_node","renderAsCollectionChild","plumeType","option","Item","Section","prop","componentProps","TriggeredOverlayContext","MenuContext","COLLECTION_OPTS","asAriaMenuProps","collectionChildRenderer","useMenu","triggerContext","useTreeState","menuListRef","useAriaMenu","autoFocus","menuProps","contextValue","itemsContainer","itemsSlot","getFocusedValue","selectionManager","focusedKey","setFocusedValue","setFocusedKey","useMenuGroup","useMenuSection","heading","headingProps","groupProps","useSeparator","separatorProps","noTitleVariant","isFirstVariant","getFirstKey","titleSlot","childNodes","childNode","separator","titleContainer","role","useMenuItem","menuContext","onAction","isHighlighted","useAriaMenuItem","onClose","close","isVirtualized","closeOnSelect","menuItemProps","labelProps","isHighlightedVariant","labelContainer","useMenuTrigger","triggerRef","placement","menuMatchTriggerWidth","menuWidth","menu","useAriaMenuTrigger","triggerPressProps","menuTriggerProps","usePress","pressProps","makeMenu","realMenu","focusStrategy","overlayMatchTriggerWidth","overlayMinTriggerWidth","overlayWidth","DropdownMenu","isOpen","defaultOpen","onOpenChange","useMenuTriggerState","shouldFlip","useMenuButton","useFocusable","triggerFocusProps","focusableProps","isOpenVariant","menuSlot","open","getTrigger","SelectContext","useAriaSelectProps","defaultValue","onChange","OptionComponent","OptionGroupComponent","onSelectionChange","defaultSelectedKey","selectedKey","useSelect","useAriaSelectState","placeholder","selectedContent","canvasCtx","usePlasmicCanvasContext","useAriaSelect","triggerContent","selectedItem","placeholderVariant","HiddenSelect","overlay","optionsContainer","ListBoxWrapper","triggerContentSlot","placeholderSlot","optionsSlot","getSelectedValue","setSelectedValue","setSelectedKey","useListBox","disallowEmptySelection","listBoxProps","useSelectOption","onRef","useAriaOption","shouldSelectOnPressUp","shouldFocusOnHover","shouldUseVirtualFocus","optionProps","isSelectedVariant","useSelectOptionGroup","useListBoxSection","asAriaSwitchProps","useSwitch","useAriaSwitch","useTextInput","inputClassName","inputStyle","getInput","input","useTriggeredOverlay","isDismissable","overlayRef","onOverlayRef","isRendered","setRendered","triggerWidth","offsetWidth","useOverlay","shouldCloseOnBlur","overlayAriaProps","overlayProps","useOverlayPosition","targetRef","containerPadding","overlayPositionProps","updatePosition","placementAxis","requestAnimationFrame","left","right","top","bottom","position","isPlacedTopVariant","isPlacedBottomVariant","isPlacedLeftVariant","isPlacedRightVariant","FocusScope","restoreFocus","DismissButton","onDismiss","document","body"],"mappings":"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"}